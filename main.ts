namespace SpriteKind {
    export const Key = SpriteKind.create()
    export const Coin = SpriteKind.create()
}
/**
 * The final installment.
 */
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile1`, function (sprite, location) {
    if (!(shelled)) {
        if (controller.up.isPressed()) {
            Herm.vy = -50
        } else if (controller.down.isPressed()) {
            Herm.vy = 50
        }
    }
})
function menuChoice (chapter: number) {
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ....55555.......................................................................................................................................................
        ....55555..............55555.........55555555555555555555555555555..............................................................................................
        ....55555..............55555.........55555555555555555555555555555..............................................................................................
        ....55555..............55555.........55555555555555555555555555555..........5555555555555555....................................................................
        ....55555..............55555........555555555555555555555555555555..........55555555555555555555................................................................
        ....55555..............55555........555555555555555555555555555555..........5555555555555555555555................55555.........................................
        ....55555..............55555........55555...................................5555555555555555555555555.............5555555.........................55555.........
        ....55555..............55555........55555...................................55555555555555555555555555............55555555.......................555555.........
        ....55555..............55555........55555...................................55555.......55555555555555............555555555.....................5555555.........
        ....55555..............55555........55555...................................55555...........55555555555...........5555555555...................55555555.........
        ....55555..............55555........55555...................................55555.............555555555...........5555555555..................555555555.........
        ....55555..............55555........55555...................................55555................5555555..........55555555555................5555555555.........
        ....55555..............55555........55555...................................55555................5555555..........555555555555.............555555555555.........
        ....55555..............55555........55555...................................55555.................555555..........5555555555555...........5555555555555.........
        ....55555..............55555........55555...................................55555.................555555..........55555555555555.........55555555555555.........
        ....55555..............55555........55555...................................55555..................55555..........55555.555555555.......555555555555555.........
        ....55555..............55555........55555...................................55555.................555555..........55555..555555555.....5555555555.55555.........
        ....55555..............55555........55555...................................55555.................555555..........55555...555555555...555555555...55555.........
        ....55555..............55555........55555...................................55555.................555555..........55555....55555555..555555555....55555.........
        ....55555..............55555........55555...................................55555................5555555..........55555.....55555555555555555.....55555.........
        ....55555..............55555........555555555555555555555555555555..........55555...............5555555...........55555......555555555555555......55555.........
        ....555555555555555555555555........555555555555555555555555555555..........55555..............55555555...........55555.......5555555555555.......55555.........
        ....555555555555555555555555........555555555555555555555555555555..........55555555555555.555555555555...........55555.......555555555555........55555.........
        ....555555555555555555555555........555555555555555555555555555555..........55555555555555555555555555............55555........5555555555.........55555.........
        ....555555555555555555555555........555555555555555555555555555555..........55555555555555555555555555............55555.........5555555...........55555.........
        ....555555555555555555555555........55555...................................555555555555555555555555..............55555..........555555...........55555.........
        ....55555..............55555........55555...................................55555555555555555555555...............55555...........55555...........55555.........
        ....55555..............55555........55555...................................5555555555555555555...................55555...........................55555.........
        ....55555..............55555........55555...................................555555555555..........................55555...........................55555.........
        ....55555..............55555........55555...................................5555555555555.........................55555...........................55555.........
        ....55555..............55555........55555...................................55555555555555........................55555...........................55555.........
        ....55555..............55555........55555...................................555555555555555.......................55555...........................55555.........
        ....55555..............55555........55555...................................55555.5555555555......................55555...........................55555.........
        ....55555..............55555........55555...................................55555...555555555.....................55555...........................55555.........
        ....55555..............55555........55555...................................55555....555555555....................55555...........................55555.........
        ....55555..............55555........55555...................................55555.....555555555...................55555...........................55555.........
        ....55555..............55555........55555...................................55555......555555555..................55555...........................55555.........
        ....55555..............55555........55555...................................55555.......5555555555................55555...........................55555.........
        ....55555..............55555........55555...................................55555........5555555555...............55555...........................55555.........
        ....55555..............55555........55555...................................55555.........5555555555..............55555...........................55555.........
        ....55555.............555555........55555...................................55555..........5555555555.............55555..........................555555.........
        ....55555.............555555........555555555555555555555555555555..........55555...........5555555555............55555..........................555555.........
        ....55555.............555555........555555555555555555555555555555..........55555.............55555555............55555..........................555555.........
        ....55555.............555555........555555555555555555555555555555..........55555..............5555555............55555..........................555555.........
        ......................55555............555555555555555555555555555..........55555...............555555............55555..........................55555..........
        .......................................555555555555555555555555555..........55555................55555..........................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ...................................................................................................................5555555......................................
        ..................................................................................................................5555555555....................................
        .......................................555...555..................................................................55555555555.......................555.........
        ......555...555........................555...555.....................................................555.........55555.555555.......................5555........
        ......555...555........................555...5555.............................................555....555.........5555....5555.......................5555........
        ......555...555........................555...5555.............................................555....555.........555......555........................555........
        ...55555555.555........................555...5555...5555555...................................555....555........5555......555........................555........
        ...55555555.55555555...555555..........555....555..555555555...555...................................555........5555.................................555.5555...
        ...55555555.5555555555.555555..........5555555555..555555555...555...55555...........................555........555................55555..555555.....555555555..
        ......555...5555555555.55555555........5555555555..555555555...555...55555..555.....555555....555..5555555......555..............5555555.555555555...555555555..
        ......555...5555555555.55555555........5555555555..555555555...555..555555..555.55555555555...555..55555555.....555...........5555555555.555555555...5555555555.
        .....5555..55555...555.55555555........555....555..555555555...555555555....555555555555555...555..55555555.....555...........55555555..55555.55555..5555555555.
        .....5555..5555....555.5555............5555...555..555..5555...55555555.....5555555555555555..555..55555555.....5555..........555555....5555....555..55555..555.
        .....555...555.....555.55555...........5555...555..555.........5555555......55555555555.5555..5555...5555.......5555..........55555.....5555...5555..55555.5555.
        ...................555..55555555.......5555...555..5555........55555........55555.5555..5555..5555....555........55555........5555......555....5555..55555.5555.
        ...................555..55555555........555...555..555555555...5555.........5555..555...5555...555....555........555555555555.5555......5555..55555..55555.555..
        .........................5555555....................55555555...5555.........555.........555....555....555........555555555555.5555......55555555555..555555555..
        ....................................................55555555...555..........555.........555....555....555..........5555555555............5555555555..555555555..
        ...............................................................555......................555....555....555.................................555555555...5555555...
        ......................................................................................................555..................................5555.555...555555....
        ................................................................................................................................................555...555.......
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ..........111......................................................................................................................................1111.........
        .......111111.....................................................................................................................................1111111.......
        .....11111111.....................................................................................................................................111111111.....
        ...1111111111.....................................................................................................................................11111111111...
        ...1111111111.....................................................................................................................................111111111111..
        .111111111111.....................................................................................................................................111111111111..
        .111111111111.....................................................................................................................................111111111111..
        .111111111111.....................................................................................................................................111111111111..
        .111111111111.....................................................................................................................................1111111111....
        ..11111111111.....................................................................................................................................1111111111....
        ....111111111.....................................................................................................................................11111111......
        ......1111111.....................................................................................................................................111111........
        ........1111......................................................................................................................................111...........
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        `)
    sprites.destroyAllSpritesOfKind(SpriteKind.Text)
    Chapter_List = [
    "Prologue",
    "Startup",
    "???????",
    "???????",
    "???????"
    ]
    Chapter_Show = textsprite.create("Chapter " + chapter + ": " + Chapter_List[chapter], 12, 1)
    Chapter_Show.setBorder(1, 1, 5)
    Chapter_Show.setPosition(80, 100)
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(Main_Menu)) {
        if (shelled == true) {
            controller.moveSprite(Herm, 100, 0)
            if (direction == "right") {
                animation.runImageAnimation(
                Herm,
                [img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . c c . . . . . . . . . . . . 
                    . c 3 6 c c c c c . . . . . . . 
                    . c 6 6 3 3 3 6 6 c . . . . . . 
                    c 3 3 3 3 3 3 6 6 6 c . . . . . 
                    c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 6 6 6 6 6 c c c . . 
                    c 3 3 3 3 6 6 6 6 6 c 3 3 3 c . 
                    c c 3 3 6 6 6 6 6 c 3 c c c 3 c 
                    c c 6 6 6 6 6 6 c 3 c c c c 6 c 
                    c 3 3 3 3 6 6 c 6 6 c c c c 6 c 
                    c 6 3 3 3 3 6 c 6 c c c c 6 c . 
                    . c 6 3 3 3 6 c c c c c 6 c . . 
                    . . c c c c c c c c c c c . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c c . . . . . . 
                    . c c 6 3 3 3 3 6 6 c . . . . . 
                    c 6 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 6 6 6 6 6 c . . . . 
                    c 3 3 3 3 6 6 6 6 6 6 c c c . . 
                    c c 6 6 6 6 6 6 6 6 c 3 3 3 c . 
                    c 6 3 3 3 6 6 6 c c 3 c c c 6 c 
                    c 3 3 3 3 3 6 c c c c c c c c c 
                    . c c c 6 6 c 4 5 5 c c 4 5 5 c 
                    . . . c 6 6 6 c 5 5 5 c 5 5 4 c 
                    . . . . c c c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 3 6 6 c . . . . . 
                    c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 c c 6 6 c c c c c . 
                    c c 3 3 3 c 5 5 c c 3 3 c 5 5 b 
                    c c 6 6 6 f f 5 c 3 c c c 5 f f 
                    c 3 3 3 3 f f 5 c c c c c 5 f f 
                    c 3 3 3 3 3 c 5 5 3 c 3 5 5 b . 
                    . c 3 3 3 c c 4 5 5 5 5 4 4 c . 
                    . . b b c 4 5 5 4 4 4 4 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c 3 c c c c . c c . . 
                    . . c 6 3 3 f f 5 c 6 c 5 f f . 
                    . c 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c 3 3 3 3 3 c 5 5 5 c 5 5 5 b . 
                    c 3 3 3 3 6 c 5 5 5 c 5 5 5 b . 
                    c c 3 3 3 6 3 c 5 5 3 5 5 b b . 
                    c c 6 6 3 3 3 c 5 5 3 5 5 b b . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    c 3 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . c 3 3 c 5 b b 4 4 4 4 b 4 5 b 
                    . . b b c 4 5 5 5 b 4 b 5 5 4 c 
                    . b 5 4 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 c . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 f f 5 3 c 3 5 f f . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                    c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . b 5 4 c 4 5 5 5 b 4 b 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `],
                100,
                false
                )
            } else if (direction == "left") {
                animation.runImageAnimation(
                Herm,
                [img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . c c . . 
                    . . . . . . . c c c c c 6 3 c . 
                    . . . . . . c 6 6 3 3 3 6 6 c . 
                    . . . . . c 6 6 6 3 3 3 3 3 3 c 
                    . . . . c 6 6 6 6 3 3 3 3 3 3 c 
                    . . c c c 6 6 6 6 6 3 3 3 3 3 c 
                    . c 3 3 3 c 6 6 6 6 6 3 3 3 3 c 
                    c 3 c c c 3 c 6 6 6 6 6 3 3 c c 
                    c 6 c c c c 3 c 6 6 6 6 6 6 c c 
                    c 6 c c c c 6 6 c 6 6 3 3 3 3 c 
                    . c 6 c c c c 6 c 6 3 3 3 3 6 c 
                    . . c 6 c c c c c 6 3 3 3 6 c . 
                    . . . c c c c c c c c c c c . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . c c c c c 6 3 c . . 
                    . . . . . c 6 6 3 3 3 3 6 c c . 
                    . . . . c 6 6 6 6 3 3 3 3 3 6 c 
                    . . . . c 6 6 6 6 6 3 3 3 3 3 c 
                    . . c c c 6 6 6 6 6 6 3 3 3 3 c 
                    . c 3 3 3 c 6 6 6 6 6 6 6 6 c c 
                    c 6 c c c 3 c c 6 6 6 3 3 3 6 c 
                    c c c c c c c c c 6 3 3 3 3 3 c 
                    c 5 5 4 c c 5 5 4 c 6 6 c c c . 
                    c 4 5 5 c 5 5 5 c 6 6 6 c . . . 
                    . c c c c c c c c c c c . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . . . . c 6 6 3 3 3 3 3 3 c . 
                    . . . . c 6 6 6 6 3 3 3 3 3 3 c 
                    . c c c c c 6 6 c c 3 3 3 3 3 c 
                    b 5 5 c 3 3 c c 5 5 c 3 3 3 c c 
                    f f 5 c c c 3 c 5 f f 6 6 6 c c 
                    f f 5 c c c c c 5 f f 3 3 3 3 c 
                    . b 5 5 3 c 3 5 5 c 3 3 3 3 3 c 
                    . c 4 4 5 5 5 5 4 c c 3 3 3 c . 
                    c 4 5 5 4 4 4 4 5 5 4 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . c c . . . 
                    . . c c . c c c c 3 c 6 3 c . . 
                    . f f 5 c 6 c 5 f f 3 3 6 c . . 
                    . f f 5 c 6 c 5 f f 3 3 3 3 c . 
                    . b 5 5 5 c 5 5 5 c 3 3 3 3 3 c 
                    . b 5 5 5 c 5 5 5 c 6 3 3 3 3 c 
                    . b b 5 5 3 5 5 c 3 6 3 3 3 c c 
                    . b b 5 5 3 5 5 c 3 3 3 6 6 c c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 3 c 
                    b 5 4 b 4 4 4 4 b b 5 c 3 3 c . 
                    c 4 5 5 b 4 b 5 5 5 4 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . c 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . f f 5 3 c 3 5 f f 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 4 5 5 b 4 b 5 5 5 4 c 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `],
                100,
                false
                )
            }
            pause(100)
            shelled = false
            Herm.setFlag(SpriteFlag.GhostThroughTiles, false)
        }
    }
})
scene.onHitWall(SpriteKind.Player, function (sprite, location) {
    if (Herm.tileKindAt(TileDirection.Bottom, assets.tile`myTile0`)) {
        Herm.x += -1
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Main_Menu) {
        if (Chapter_List[menuNumber] == "???????") {
            Chapter_Show.sayText("Coming Soon!", 500, true)
        } else {
            loadLevel()
        }
    } else {
        if (Herm.isHittingTile(CollisionDirection.Bottom)) {
            Herm.vy += -150
        }
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Coin, function (sprite, otherSprite) {
    sprites.destroy(otherSprite, effects.rings, 100)
    info.changeScoreBy(1)
})
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    pause(50)
    if (!(Main_Menu)) {
        if (shelled == false && Herm.vx == 0) {
            animation.stopAnimation(animation.AnimationTypes.All, Herm)
        }
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile15`, function (sprite, location) {
    sprites.destroy(Herm, effects.disintegrate, 100)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile13`, function (sprite, location) {
    sprites.destroy(Herm, effects.disintegrate, 100)
})
function Cutscenes () {
	
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Main_Menu) {
        if (!(menuNumber <= 0)) {
            menuNumber += -1
            menuChoice(menuNumber)
        }
    } else {
        direction = "left"
        if (shelled == false) {
            animation.stopAnimation(animation.AnimationTypes.All, Herm)
            animation.runImageAnimation(
            Herm,
            [img`
                . . . . . . . . . . . c c . . . 
                . . . . . . . c c c c 6 3 c . . 
                . . . . . . c 6 3 3 3 3 6 c . . 
                . . c c . c 6 c c 3 3 3 3 3 c . 
                . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                . . c 5 5 5 5 b c c 3 3 3 3 3 c 
                . . c 4 5 5 4 b 5 5 c 3 3 3 c . 
                . c 5 b 4 4 b b 5 c c b b b . . 
                . c 4 4 b 5 5 5 4 c 4 4 4 5 b . 
                . c 5 4 c 5 5 5 c 4 4 4 c 5 c . 
                . c 5 c 5 5 5 5 c 4 4 4 c c c . 
                . . c c c c c c c . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . c c . . . . 
                . . . . . . c c c c 6 3 c . . . 
                . . . . . c 6 6 3 3 3 6 c . . . 
                . . . . c 6 6 3 3 3 3 3 3 c . . 
                b c c c 6 6 c c 3 3 3 3 3 3 c . 
                b 5 5 c 6 c 5 5 c 3 3 3 3 3 c . 
                f f 5 c 6 c 5 f f 6 3 3 3 c c . 
                f f 5 c c c 5 f f 6 6 6 6 c c . 
                . b 5 5 3 5 5 c 3 3 3 3 3 3 c . 
                . c 5 5 5 5 4 c c c 3 3 3 3 c . 
                . c 4 5 5 4 4 b 5 5 c 3 3 c . . 
                . c 5 b 4 4 b b 5 c b b c . . . 
                . c c 5 4 c 5 5 5 c c 5 c . . . 
                . . . c c 5 5 5 5 c c c c . . . 
                . . . . c c c c c c . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . c c . . . 
                . . . . . . . c c c c 6 3 c . . 
                . . . . . . c 6 6 3 3 3 6 c . . 
                . . . . . c 6 6 3 3 3 3 3 3 c . 
                . b c c c 6 6 c c 3 3 3 3 3 3 c 
                . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                . f f 5 c c c 5 f f 6 6 6 6 c c 
                . . b 5 5 3 5 5 c c c 3 3 3 3 c 
                . . c 5 5 5 5 5 b 5 5 c 3 3 3 c 
                . c 4 4 5 5 4 4 b b 5 c 3 3 c . 
                . c 5 5 b 4 4 4 b 5 5 5 b c . . 
                . c 5 5 5 4 4 4 c 5 5 5 c b . . 
                . . c c c c 4 c 5 5 5 5 c c . . 
                . . . . c c c c c c c c c c . . 
                `,img`
                . . . . . . . . . . . c c . . . 
                . . . . . . . c c c c 6 3 c . . 
                . . . . . . c 6 3 3 3 3 6 c . . 
                . . c c . c 6 c c 3 3 3 3 3 c . 
                . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                . c c 5 5 5 5 4 c c 3 3 3 3 3 c 
                c 5 5 4 5 5 4 c 5 5 c 3 3 3 c . 
                b 5 4 b 4 4 4 c 5 5 5 b c c . . 
                c 4 5 5 b 4 4 c 5 5 5 c b b . . 
                c 5 5 5 c 4 c 5 5 5 5 c c 5 b . 
                c 5 5 5 5 c 4 c c c c c c 5 c . 
                . c c c c c c . . . . . c c c . 
                `],
            50,
            true
            )
        } else if (shelled == true && direction == "left") {
            Herm.image.flipX()
        }
    }
})
function loadLevel () {
    if (Main_Menu) {
        Main_Menu = false
        sprites.destroyAllSpritesOfKind(SpriteKind.Text)
        Herm = sprites.create(img`
            . . . c c . . . . . . . . . . . 
            . . c 3 6 c c c c . . . . . . . 
            . . c 6 3 3 3 3 6 c . . . . . . 
            . c 3 3 3 3 3 c c 6 c . c c . . 
            c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
            c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
            c c 3 3 3 6 f f 5 c 6 c 5 f f . 
            c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
            c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
            c 3 3 3 3 3 c c 4 5 5 5 5 c c . 
            . c 3 3 3 c 5 5 c 4 5 5 4 5 5 c 
            . . c c b 5 5 5 c 4 4 4 b 4 5 b 
            . . b b c 5 5 5 c 4 4 b 5 5 4 c 
            . b 5 c c 5 5 5 5 c 4 c 5 5 5 c 
            . c 5 c c c c c c 4 c 5 5 5 5 c 
            . c c c . . . . . c c c c c c . 
            `, SpriteKind.Player)
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
        info.setScore(0)
        if (menuNumber == 0) {
            mapSelect(0)
            Cutscenes()
        } else if (menuNumber == 1) {
            Herm = sprites.create(img`
                . . . c c . . . . . . . . . . . 
                . . c 3 6 c c c c . . . . . . . 
                . . c 6 3 3 3 3 6 c . . . . . . 
                . c 3 3 3 3 3 c c 6 c . c c . . 
                c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                c 3 3 3 3 3 c c 4 5 5 5 5 c c . 
                . c 3 3 3 c 5 5 c 4 5 5 4 5 5 c 
                . . c c b 5 5 5 c 4 4 4 b 4 5 b 
                . . b b c 5 5 5 c 4 4 b 5 5 4 c 
                . b 5 c c 5 5 5 5 c 4 c 5 5 5 c 
                . c 5 c c c c c c 4 c 5 5 5 5 c 
                . c c c . . . . . c c c c c c . 
                `, SpriteKind.Player)
            mapSelect(1)
            tiles.placeOnTile(Herm, checkpoint)
            for (let value of tiles.getTilesByType(assets.tile`myTile2`)) {
                key = sprites.create(img`
                    . . . . . . 5 5 5 5 f . . . . . 
                    . . . . . 5 5 5 5 5 5 f . . . . 
                    . . . . 5 5 5 . . 5 5 5 f . . . 
                    . . . 5 5 5 . . . . 5 5 5 f . . 
                    . . . 5 5 . . . . . . 5 5 f . . 
                    . . . 5 5 . . . . . . 5 5 f . . 
                    . . . 5 5 5 . . . . 5 5 5 f . . 
                    . . . . 5 5 5 . . 5 5 5 f . . . 
                    . . . . . 5 5 5 5 5 5 f . . . . 
                    . . . . . . 5 5 5 5 f . . . . . 
                    . . . . . . . 5 5 f . . . . . . 
                    . . . . . . . 5 5 f . . . . . . 
                    . . . . . . . 5 5 f f . . . . . 
                    . . . . . . . 5 5 5 5 f . . . . 
                    . . . . . . . 5 5 f f . . . . . 
                    . . . . . . . 5 5 5 5 f . . . . 
                    `, SpriteKind.Key)
                tiles.placeOnTile(key, value)
                tiles.setTileAt(value, assets.tile`transparency16`)
            }
            for (let value of tiles.getTilesByType(assets.tile`myTile6`)) {
                coin = sprites.create(img`
                    . . b b b b . . 
                    . b 5 5 5 5 b . 
                    b 5 d 3 3 d 5 b 
                    b 5 3 5 5 1 5 b 
                    c 5 3 5 5 1 d c 
                    c d d 1 1 d d c 
                    . f d d d d f . 
                    . . f f f f . . 
                    `, SpriteKind.Coin)
                tiles.placeOnTile(coin, value)
                animation.runImageAnimation(
                coin,
                [img`
                    . . b b b b . . 
                    . b 5 5 5 5 b . 
                    b 5 d 3 3 d 5 b 
                    b 5 3 5 5 1 5 b 
                    c 5 3 5 5 1 d c 
                    c d d 1 1 d d c 
                    . f d d d d f . 
                    . . f f f f . . 
                    `,img`
                    . . b b b . . . 
                    . b 5 5 5 b . . 
                    b 5 d 3 d 5 b . 
                    b 5 3 5 1 5 b . 
                    c 5 3 5 1 d c . 
                    c 5 d 1 d d c . 
                    . f d d d f . . 
                    . . f f f . . . 
                    `,img`
                    . . . b b . . . 
                    . . b 5 5 b . . 
                    . b 5 d 1 5 b . 
                    . b 5 3 1 5 b . 
                    . c 5 3 1 d c . 
                    . c 5 1 d d c . 
                    . . f d d f . . 
                    . . . f f . . . 
                    `,img`
                    . . . b b . . . 
                    . . b 5 5 b . . 
                    . . b 1 1 b . . 
                    . . b 5 5 b . . 
                    . . b d d b . . 
                    . . c d d c . . 
                    . . c 3 3 c . . 
                    . . . f f . . . 
                    `,img`
                    . . . b b . . . 
                    . . b 5 5 b . . 
                    . b 5 1 d 5 b . 
                    . b 5 1 3 5 b . 
                    . c d 1 3 5 c . 
                    . c d d 1 5 c . 
                    . . f d d f . . 
                    . . . f f . . . 
                    `,img`
                    . . . b b b . . 
                    . . b 5 5 5 b . 
                    . b 5 d 3 d 5 b 
                    . b 5 1 5 3 5 b 
                    . c d 1 5 3 5 c 
                    . c d d 1 d 5 c 
                    . . f d d d f . 
                    . . . f f f . . 
                    `],
                100,
                true
                )
                tiles.setTileAt(value, assets.tile`transparency16`)
            }
        }
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Key, function (sprite, otherSprite) {
    otherSprite.startEffect(effects.smiles, 100)
    otherSprite.setFlag(SpriteFlag.Ghost, true)
    otherSprite.follow(sprite, 97)
    hasKey = true
    for (let value of tiles.getTilesByType(assets.tile`myTile8`)) {
        tiles.setWallAt(value, false)
    }
})
sprites.onDestroyed(SpriteKind.Player, function (sprite) {
    Herm = sprites.create(img`
        . . . c c . . . . . . . . . . . 
        . . c 3 6 c c c c . . . . . . . 
        . . c 6 3 3 3 3 6 c . . . . . . 
        . c 3 3 3 3 3 c c 6 c . c c . . 
        c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
        c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
        c c 3 3 3 6 f f 5 c 6 c 5 f f . 
        c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
        c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
        c 3 3 3 3 3 c c 4 5 5 5 5 c c . 
        . c 3 3 3 c 5 5 c 4 5 5 4 5 5 c 
        . . c c b 5 5 5 c 4 4 4 b 4 5 b 
        . . b b c 5 5 5 c 4 4 b 5 5 4 c 
        . b 5 c c 5 5 5 5 c 4 c 5 5 5 c 
        . c 5 c c c c c c 4 c 5 5 5 5 c 
        . c c c . . . . . c c c c c c . 
        `, SpriteKind.Player)
    tiles.placeOnTile(Herm, checkpoint)
    if (sprites.allOfKind(SpriteKind.Key).length > 0) {
        for (let value of sprites.allOfKind(SpriteKind.Key)) {
            value.setFlag(SpriteFlag.Ghost, false)
            hasKey = false
        }
        for (let value of tiles.getTilesByType(assets.tile`myTile8`)) {
            tiles.setWallAt(value, true)
        }
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile8`, function (sprite, location) {
    for (let value of sprites.allOfKind(SpriteKind.Key)) {
        if (value.vx != 0) {
            sprites.destroy(value, effects.halo, 100)
        }
    }
    tiles.setTileAt(location, assets.tile`transparency16`)
    if (Herm.isHittingTile(CollisionDirection.Bottom)) {
        tiles.setTileAt(location.getNeighboringLocation(CollisionDirection.Top), assets.tile`transparency16`)
    } else {
        tiles.setTileAt(location.getNeighboringLocation(CollisionDirection.Bottom), assets.tile`transparency16`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile8`)) {
        tiles.setWallAt(value, true)
    }
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Main_Menu) {
        if (!(menuNumber >= Chapter_List.length - 1)) {
            menuNumber += 1
            menuChoice(menuNumber)
        }
    } else {
        direction = "right"
        if (shelled == false) {
            animation.stopAnimation(animation.AnimationTypes.All, Herm)
            animation.runImageAnimation(
            Herm,
            [img`
                . . . c c . . . . . . . . . . . 
                . . c 3 6 c c c c . . . . . . . 
                . . c 6 3 3 3 3 6 c . . . . . . 
                . c 3 3 3 3 3 c c 6 c . c c . . 
                c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                c 3 3 3 3 3 c c b 5 5 5 5 c . . 
                . c 3 3 3 c 5 5 b 4 5 5 4 c . . 
                . . b b b c c 5 b b 4 4 b 5 c . 
                . b 5 4 4 4 c 4 5 5 5 b 4 4 c . 
                . c 5 c 4 4 4 c 5 5 5 c 4 5 c . 
                . c c c 4 4 4 c 5 5 5 5 c 5 c . 
                . . . . . . . c c c c c c c . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . c c . . . . . . . . . . 
                . . . c 3 6 c c c c . . . . . . 
                . . . c 6 3 3 3 6 6 c . . . . . 
                . . c 3 3 3 3 3 3 6 6 c . . . . 
                . c 3 3 3 3 3 3 c c 6 6 c c c b 
                . c 3 3 3 3 3 c 5 5 c 6 c 5 5 b 
                . c c 3 3 3 6 f f 5 c 6 c 5 f f 
                . c c 6 6 6 6 f f 5 c c c 5 f f 
                . c 3 3 3 3 3 3 c 5 5 3 5 5 b . 
                . c 3 3 3 3 c c c 4 5 5 5 5 c . 
                . . c 3 3 c 5 5 b 4 4 5 5 4 c . 
                . . . c b b c 5 b b 4 4 b 5 c . 
                . . . c 5 c c 5 5 5 c 4 5 c c . 
                . . . c c c c 5 5 5 5 c c . . . 
                . . . . . . c c c c c c . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . c c . . . . . . . . . . . 
                . . c 3 6 c c c c . . . . . . . 
                . . c 6 3 3 3 6 6 c . . . . . . 
                . c 3 3 3 3 3 3 6 6 c . . . . . 
                c 3 3 3 3 3 3 c c 6 6 c c c b . 
                c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                c c 6 6 6 6 f f 5 c c c 5 f f . 
                c 3 3 3 3 c c c 5 5 3 5 5 b . . 
                c 3 3 3 c 5 5 b 5 5 5 5 5 c . . 
                . c 3 3 c 5 b b 4 4 5 5 4 4 c . 
                . . c b 5 5 5 b 4 4 4 b 5 5 c . 
                . . b c 5 5 5 c 4 4 4 5 5 5 c . 
                . . c c 5 5 5 5 c 4 c c c c . . 
                . . c c c c c c c c c c . . . . 
                `,img`
                . . . c c . . . . . . . . . . . 
                . . c 3 6 c c c c . . . . . . . 
                . . c 6 3 3 3 3 6 c . . . . . . 
                . c 3 3 3 3 3 c c 6 c . c c . . 
                c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                c 3 3 3 3 3 c c 4 5 5 5 5 c c . 
                . c 3 3 3 c 5 5 c 4 5 5 4 5 5 c 
                . . c c b 5 5 5 c 4 4 4 b 4 5 b 
                . . b b c 5 5 5 c 4 4 b 5 5 4 c 
                . b 5 c c 5 5 5 5 c 4 c 5 5 5 c 
                . c 5 c c c c c c 4 c 5 5 5 5 c 
                . c c c . . . . . c c c c c c . 
                `],
            50,
            true
            )
        } else if (shelled == true && direction == "right") {
            Herm.image.flipX()
        }
    }
})
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    pause(50)
    if (!(Main_Menu)) {
        if (shelled == false && Herm.vx == 0) {
            animation.stopAnimation(animation.AnimationTypes.All, Herm)
        }
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile10`, function (sprite, location) {
    sprites.destroy(Herm, effects.ashes, 10)
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(Main_Menu)) {
        if (Herm.isHittingTile(CollisionDirection.Bottom) && shelled == false) {
            Herm.setFlag(SpriteFlag.GhostThroughTiles, true)
            shelled = true
            controller.moveSprite(Herm, 0, 0)
            if (direction == "right") {
                animation.runImageAnimation(
                Herm,
                [img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                    c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . b 5 4 c 4 5 5 5 b 4 b 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 c . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 f f 5 3 c 3 5 f f . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c 3 c c c c . c c . . 
                    . . c 6 3 3 f f 5 c 6 c 5 f f . 
                    . c 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c 3 3 3 3 3 c 5 5 5 c 5 5 5 b . 
                    c 3 3 3 3 6 c 5 5 5 c 5 5 5 b . 
                    c c 3 3 3 6 3 c 5 5 3 5 5 b b . 
                    c c 6 6 3 3 3 c 5 5 3 5 5 b b . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    c 3 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . c 3 3 c 5 b b 4 4 4 4 b 4 5 b 
                    . . b b c 4 5 5 5 b 4 b 5 5 4 c 
                    . b 5 4 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 3 6 6 c . . . . . 
                    c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 c c 6 6 c c c c c . 
                    c c 3 3 3 c 5 5 c c 3 3 c 5 5 b 
                    c c 6 6 6 f f 5 c 3 c c c 5 f f 
                    c 3 3 3 3 f f 5 c c c c c 5 f f 
                    c 3 3 3 3 3 c 5 5 3 c 3 5 5 b . 
                    . c 3 3 3 c c 4 5 5 5 5 4 4 c . 
                    . . b b c 4 5 5 4 4 4 4 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c c . . . . . . 
                    . c c 6 3 3 3 3 6 6 c . . . . . 
                    c 6 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 6 6 6 6 6 c . . . . 
                    c 3 3 3 3 6 6 6 6 6 6 c c c . . 
                    c c 6 6 6 6 6 6 6 6 c 3 3 3 c . 
                    c 6 3 3 3 6 6 6 c c 3 c c c 6 c 
                    c 3 3 3 3 3 6 c c c c c c c c c 
                    . c c c 6 6 c 4 5 5 c c 4 5 5 c 
                    . . . c 6 6 6 c 5 5 5 c 5 5 4 c 
                    . . . . c c c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . c c . . . . . . . . . . . . 
                    . c 3 6 c c c c c . . . . . . . 
                    . c 6 6 3 3 3 6 6 c . . . . . . 
                    c 3 3 3 3 3 3 6 6 6 c . . . . . 
                    c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 6 6 6 6 6 c c c . . 
                    c 3 3 3 3 6 6 6 6 6 c 3 3 3 c . 
                    c c 3 3 6 6 6 6 6 c 3 c c c 3 c 
                    c c 6 6 6 6 6 6 c 3 c c c c 6 c 
                    c 3 3 3 3 6 6 c 6 6 c c c c 6 c 
                    c 6 3 3 3 3 6 c 6 c c c c 6 c . 
                    . c 6 3 3 3 6 c c c c c 6 c . . 
                    . . c c c c c c c c c c c . . . 
                    `],
                100,
                false
                )
            } else {
                animation.runImageAnimation(
                Herm,
                [img`
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 4 5 5 b 4 b 5 5 5 4 c 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . c 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . f f 5 3 c 3 5 f f 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . c c . . . 
                    . . c c . c c c c 3 c 6 3 c . . 
                    . f f 5 c 6 c 5 f f 3 3 6 c . . 
                    . f f 5 c 6 c 5 f f 3 3 3 3 c . 
                    . b 5 5 5 c 5 5 5 c 3 3 3 3 3 c 
                    . b 5 5 5 c 5 5 5 c 6 3 3 3 3 c 
                    . b b 5 5 3 5 5 c 3 6 3 3 3 c c 
                    . b b 5 5 3 5 5 c 3 3 3 6 6 c c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 3 c 
                    b 5 4 b 4 4 4 4 b b 5 c 3 3 c . 
                    c 4 5 5 b 4 b 5 5 5 4 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . . . . c 6 6 3 3 3 3 3 3 c . 
                    . . . . c 6 6 6 6 3 3 3 3 3 3 c 
                    . c c c c c 6 6 c c 3 3 3 3 3 c 
                    b 5 5 c 3 3 c c 5 5 c 3 3 3 c c 
                    f f 5 c c c 3 c 5 f f 6 6 6 c c 
                    f f 5 c c c c c 5 f f 3 3 3 3 c 
                    . b 5 5 3 c 3 5 5 c 3 3 3 3 3 c 
                    . c 4 4 5 5 5 5 4 c c 3 3 3 c . 
                    c 4 5 5 4 4 4 4 5 5 4 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . c c c c c 6 3 c . . 
                    . . . . . c 6 6 3 3 3 3 6 c c . 
                    . . . . c 6 6 6 6 3 3 3 3 3 6 c 
                    . . . . c 6 6 6 6 6 3 3 3 3 3 c 
                    . . c c c 6 6 6 6 6 6 3 3 3 3 c 
                    . c 3 3 3 c 6 6 6 6 6 6 6 6 c c 
                    c 6 c c c 3 c c 6 6 6 3 3 3 6 c 
                    c c c c c c c c c 6 3 3 3 3 3 c 
                    c 5 5 4 c c 5 5 4 c 6 6 c c c . 
                    c 4 5 5 c 5 5 5 c 6 6 6 c . . . 
                    . c c c c c c c c c c c . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . c c . . 
                    . . . . . . . c c c c c 6 3 c . 
                    . . . . . . c 6 6 3 3 3 6 6 c . 
                    . . . . . c 6 6 6 3 3 3 3 3 3 c 
                    . . . . c 6 6 6 6 3 3 3 3 3 3 c 
                    . . c c c 6 6 6 6 6 3 3 3 3 3 c 
                    . c 3 3 3 c 6 6 6 6 6 3 3 3 3 c 
                    c 3 c c c 3 c 6 6 6 6 6 3 3 c c 
                    c 6 c c c c 3 c 6 6 6 6 6 6 c c 
                    c 6 c c c c 6 6 c 6 6 3 3 3 3 c 
                    . c 6 c c c c 6 c 6 3 3 3 3 6 c 
                    . . c 6 c c c c c 6 3 3 3 6 c . 
                    . . . c c c c c c c c c c c . . 
                    `],
                100,
                false
                )
            }
        }
    }
})
function mapSelect (num: number) {
    if (num == 0) {
        scene.setBackgroundColor(9)
    } else if (num == 1) {
        tiles.setCurrentTilemap(tilemap`level2`)
        // column at half of the room, same row as Herm.
        scene.centerCameraAt(4.5 * 16, 27 * 16)
        checkpoint = tiles.getTileLocation(2, 27)
    } else if (num == 2) {
        scene.setBackgroundColor(9)
        tiles.setCurrentTilemap(tilemap`level6`)
        scene.centerCameraAt(4.5 * 16, 6.3 * 16)
        checkpoint = tiles.getTileLocation(3, 8)
    }
}
sprites.onCreated(SpriteKind.Player, function (sprite) {
    controller.moveSprite(sprite, 100, 0)
    sprite.ay = 600
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile14`, function (sprite, location) {
    sprites.destroy(Herm, effects.disintegrate, 100)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile11`, function (sprite, location) {
    sprites.destroy(Herm, effects.disintegrate, 100)
})
let coin: Sprite = null
let key: Sprite = null
let checkpoint: tiles.Location = null
let Chapter_Show: TextSprite = null
let Chapter_List: string[] = []
let Herm: Sprite = null
let menuNumber = 0
let direction = ""
let hasKey = false
let shelled = false
let Main_Menu = false
Main_Menu = true
shelled = false
hasKey = false
direction = "right"
menuNumber = 0
menuChoice(menuNumber)
game.onUpdate(function () {
    if (!(Main_Menu)) {
        if (Herm.x > scene.cameraProperty(CameraProperty.Right)) {
            scene.centerCameraAt(scene.cameraProperty(CameraProperty.X) + 160, scene.cameraProperty(CameraProperty.Y))
            checkpoint = Herm.tilemapLocation()
        } else if (Herm.x < scene.cameraProperty(CameraProperty.Left)) {
            scene.centerCameraAt(scene.cameraProperty(CameraProperty.X) - 160, scene.cameraProperty(CameraProperty.Y))
            checkpoint = Herm.tilemapLocation()
        } else if (Herm.y < scene.cameraProperty(CameraProperty.Top)) {
            scene.centerCameraAt(scene.cameraProperty(CameraProperty.X), scene.cameraProperty(CameraProperty.Y) - 112)
            checkpoint = Herm.tilemapLocation()
        } else if (Herm.y > scene.cameraProperty(CameraProperty.Bottom)) {
            scene.centerCameraAt(scene.cameraProperty(CameraProperty.X), scene.cameraProperty(CameraProperty.Y) + 112)
            checkpoint = Herm.tilemapLocation()
        }
    }
})
