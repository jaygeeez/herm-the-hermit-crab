namespace SpriteKind {
    export const Key = SpriteKind.create()
    export const Coin = SpriteKind.create()
}
/**
 * The final installment.
 */
function menuChoice (chapter: number) {
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ....55555.......................................................................................................................................................
        ....55555..............55555.........55555555555555555555555555555..............................................................................................
        ....55555..............55555.........55555555555555555555555555555..............................................................................................
        ....55555..............55555.........55555555555555555555555555555..........5555555555555555....................................................................
        ....55555..............55555........555555555555555555555555555555..........55555555555555555555................................................................
        ....55555..............55555........555555555555555555555555555555..........5555555555555555555555................55555.........................................
        ....55555..............55555........55555...................................5555555555555555555555555.............5555555.........................55555.........
        ....55555..............55555........55555...................................55555555555555555555555555............55555555.......................555555.........
        ....55555..............55555........55555...................................55555.......55555555555555............555555555.....................5555555.........
        ....55555..............55555........55555...................................55555...........55555555555...........5555555555...................55555555.........
        ....55555..............55555........55555...................................55555.............555555555...........5555555555..................555555555.........
        ....55555..............55555........55555...................................55555................5555555..........55555555555................5555555555.........
        ....55555..............55555........55555...................................55555................5555555..........555555555555.............555555555555.........
        ....55555..............55555........55555...................................55555.................555555..........5555555555555...........5555555555555.........
        ....55555..............55555........55555...................................55555.................555555..........55555555555555.........55555555555555.........
        ....55555..............55555........55555...................................55555..................55555..........55555.555555555.......555555555555555.........
        ....55555..............55555........55555...................................55555.................555555..........55555..555555555.....5555555555.55555.........
        ....55555..............55555........55555...................................55555.................555555..........55555...555555555...555555555...55555.........
        ....55555..............55555........55555...................................55555.................555555..........55555....55555555..555555555....55555.........
        ....55555..............55555........55555...................................55555................5555555..........55555.....55555555555555555.....55555.........
        ....55555..............55555........555555555555555555555555555555..........55555...............5555555...........55555......555555555555555......55555.........
        ....555555555555555555555555........555555555555555555555555555555..........55555..............55555555...........55555.......5555555555555.......55555.........
        ....555555555555555555555555........555555555555555555555555555555..........55555555555555.555555555555...........55555.......555555555555........55555.........
        ....555555555555555555555555........555555555555555555555555555555..........55555555555555555555555555............55555........5555555555.........55555.........
        ....555555555555555555555555........555555555555555555555555555555..........55555555555555555555555555............55555.........5555555...........55555.........
        ....555555555555555555555555........55555...................................555555555555555555555555..............55555..........555555...........55555.........
        ....55555..............55555........55555...................................55555555555555555555555...............55555...........55555...........55555.........
        ....55555..............55555........55555...................................5555555555555555555...................55555...........................55555.........
        ....55555..............55555........55555...................................555555555555..........................55555...........................55555.........
        ....55555..............55555........55555...................................5555555555555.........................55555...........................55555.........
        ....55555..............55555........55555...................................55555555555555........................55555...........................55555.........
        ....55555..............55555........55555...................................555555555555555.......................55555...........................55555.........
        ....55555..............55555........55555...................................55555.5555555555......................55555...........................55555.........
        ....55555..............55555........55555...................................55555...555555555.....................55555...........................55555.........
        ....55555..............55555........55555...................................55555....555555555....................55555...........................55555.........
        ....55555..............55555........55555...................................55555.....555555555...................55555...........................55555.........
        ....55555..............55555........55555...................................55555......555555555..................55555...........................55555.........
        ....55555..............55555........55555...................................55555.......5555555555................55555...........................55555.........
        ....55555..............55555........55555...................................55555........5555555555...............55555...........................55555.........
        ....55555..............55555........55555...................................55555.........5555555555..............55555...........................55555.........
        ....55555.............555555........55555...................................55555..........5555555555.............55555..........................555555.........
        ....55555.............555555........555555555555555555555555555555..........55555...........5555555555............55555..........................555555.........
        ....55555.............555555........555555555555555555555555555555..........55555.............55555555............55555..........................555555.........
        ....55555.............555555........555555555555555555555555555555..........55555..............5555555............55555..........................555555.........
        ......................55555............555555555555555555555555555..........55555...............555555............55555..........................55555..........
        .......................................555555555555555555555555555..........55555................55555..........................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ...................................................................................................................5555555......................................
        ..................................................................................................................5555555555....................................
        .......................................555...555..................................................................55555555555.......................555.........
        ......555...555........................555...555.....................................................555.........55555.555555.......................5555........
        ......555...555........................555...5555.............................................555....555.........5555....5555.......................5555........
        ......555...555........................555...5555.............................................555....555.........555......555........................555........
        ...55555555.555........................555...5555...5555555...................................555....555........5555......555........................555........
        ...55555555.55555555...555555..........555....555..555555555...555...................................555........5555.................................555.5555...
        ...55555555.5555555555.555555..........5555555555..555555555...555...55555...........................555........555................55555..555555.....555555555..
        ......555...5555555555.55555555........5555555555..555555555...555...55555..555.....555555....555..5555555......555..............5555555.555555555...555555555..
        ......555...5555555555.55555555........5555555555..555555555...555..555555..555.55555555555...555..55555555.....555...........5555555555.555555555...5555555555.
        .....5555..55555...555.55555555........555....555..555555555...555555555....555555555555555...555..55555555.....555...........55555555..55555.55555..5555555555.
        .....5555..5555....555.5555............5555...555..555..5555...55555555.....5555555555555555..555..55555555.....5555..........555555....5555....555..55555..555.
        .....555...555.....555.55555...........5555...555..555.........5555555......55555555555.5555..5555...5555.......5555..........55555.....5555...5555..55555.5555.
        ...................555..55555555.......5555...555..5555........55555........55555.5555..5555..5555....555........55555........5555......555....5555..55555.5555.
        ...................555..55555555........555...555..555555555...5555.........5555..555...5555...555....555........555555555555.5555......5555..55555..55555.555..
        .........................5555555....................55555555...5555.........555.........555....555....555........555555555555.5555......55555555555..555555555..
        ....................................................55555555...555..........555.........555....555....555..........5555555555............5555555555..555555555..
        ...............................................................555......................555....555....555.................................555555555...5555555...
        ......................................................................................................555..................................5555.555...555555....
        ................................................................................................................................................555...555.......
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ..........111......................................................................................................................................1111.........
        .......111111.....................................................................................................................................1111111.......
        .....11111111.....................................................................................................................................111111111.....
        ...1111111111.....................................................................................................................................11111111111...
        ...1111111111.....................................................................................................................................111111111111..
        .111111111111.....................................................................................................................................111111111111..
        .111111111111.....................................................................................................................................111111111111..
        .111111111111.....................................................................................................................................111111111111..
        .111111111111.....................................................................................................................................1111111111....
        ..11111111111.....................................................................................................................................1111111111....
        ....111111111.....................................................................................................................................11111111......
        ......1111111.....................................................................................................................................111111........
        ........1111......................................................................................................................................111...........
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        `)
    sprites.destroyAllSpritesOfKind(SpriteKind.Text)
    Chapter_List = [
    "Prologue",
    "???????",
    "???????",
    "???????",
    "???????"
    ]
    Chapter_Show = textsprite.create("Chapter " + chapter + ": " + Chapter_List[chapter], 12, 1)
    Chapter_Show.setBorder(1, 1, 5)
    Chapter_Show.setPosition(80, 100)
}
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(Main_Menu)) {
        tiles.setWallAt(tiles.getTileLocation(3, 5), false)
        if (shelled == true) {
            controller.moveSprite(Herm, 100, 0)
            if (direction == "right") {
                animation.runImageAnimation(
                Herm,
                [img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . c c . . . . . . . . . . . . 
                    . c 3 6 c c c c c . . . . . . . 
                    . c 6 6 3 3 3 6 6 c . . . . . . 
                    c 3 3 3 3 3 3 6 6 6 c . . . . . 
                    c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 6 6 6 6 6 c c c . . 
                    c 3 3 3 3 6 6 6 6 6 c 3 3 3 c . 
                    c c 3 3 6 6 6 6 6 c 3 c c c 3 c 
                    c c 6 6 6 6 6 6 c 3 c c c c 6 c 
                    c 3 3 3 3 6 6 c 6 6 c c c c 6 c 
                    c 6 3 3 3 3 6 c 6 c c c c 6 c . 
                    . c 6 3 3 3 6 c c c c c 6 c . . 
                    . . c c c c c c c c c c c . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c c . . . . . . 
                    . c c 6 3 3 3 3 6 6 c . . . . . 
                    c 6 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 6 6 6 6 6 c . . . . 
                    c 3 3 3 3 6 6 6 6 6 6 c c c . . 
                    c c 6 6 6 6 6 6 6 6 c 3 3 3 c . 
                    c 6 3 3 3 6 6 6 c c 3 c c c 6 c 
                    c 3 3 3 3 3 6 c c c c c c c c c 
                    . c c c 6 6 c 4 5 5 c c 4 5 5 c 
                    . . . c 6 6 6 c 5 5 5 c 5 5 4 c 
                    . . . . c c c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 3 6 6 c . . . . . 
                    c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 c c 6 6 c c c c c . 
                    c c 3 3 3 c 5 5 c c 3 3 c 5 5 b 
                    c c 6 6 6 f f 5 c 3 c c c 5 f f 
                    c 3 3 3 3 f f 5 c c c c c 5 f f 
                    c 3 3 3 3 3 c 5 5 3 c 3 5 5 b . 
                    . c 3 3 3 c c 4 5 5 5 5 4 4 c . 
                    . . b b c 4 5 5 4 4 4 4 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c 3 c c c c . c c . . 
                    . . c 6 3 3 f f 5 c 6 c 5 f f . 
                    . c 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c 3 3 3 3 3 c 5 5 5 c 5 5 5 b . 
                    c 3 3 3 3 6 c 5 5 5 c 5 5 5 b . 
                    c c 3 3 3 6 3 c 5 5 3 5 5 b b . 
                    c c 6 6 3 3 3 c 5 5 3 5 5 b b . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    c 3 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . c 3 3 c 5 b b 4 4 4 4 b 4 5 b 
                    . . b b c 4 5 5 5 b 4 b 5 5 4 c 
                    . b 5 4 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 c . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 f f 5 3 c 3 5 f f . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                    c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . b 5 4 c 4 5 5 5 b 4 b 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `],
                100,
                false
                )
            } else if (direction == "left") {
                animation.runImageAnimation(
                Herm,
                [img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . c c . . 
                    . . . . . . . c c c c c 6 3 c . 
                    . . . . . . c 6 6 3 3 3 6 6 c . 
                    . . . . . c 6 6 6 3 3 3 3 3 3 c 
                    . . . . c 6 6 6 6 3 3 3 3 3 3 c 
                    . . c c c 6 6 6 6 6 3 3 3 3 3 c 
                    . c 3 3 3 c 6 6 6 6 6 3 3 3 3 c 
                    c 3 c c c 3 c 6 6 6 6 6 3 3 c c 
                    c 6 c c c c 3 c 6 6 6 6 6 6 c c 
                    c 6 c c c c 6 6 c 6 6 3 3 3 3 c 
                    . c 6 c c c c 6 c 6 3 3 3 3 6 c 
                    . . c 6 c c c c c 6 3 3 3 6 c . 
                    . . . c c c c c c c c c c c . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . c c c c c 6 3 c . . 
                    . . . . . c 6 6 3 3 3 3 6 c c . 
                    . . . . c 6 6 6 6 3 3 3 3 3 6 c 
                    . . . . c 6 6 6 6 6 3 3 3 3 3 c 
                    . . c c c 6 6 6 6 6 6 3 3 3 3 c 
                    . c 3 3 3 c 6 6 6 6 6 6 6 6 c c 
                    c 6 c c c 3 c c 6 6 6 3 3 3 6 c 
                    c c c c c c c c c 6 3 3 3 3 3 c 
                    c 5 5 4 c c 5 5 4 c 6 6 c c c . 
                    c 4 5 5 c 5 5 5 c 6 6 6 c . . . 
                    . c c c c c c c c c c c . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . . . . c 6 6 3 3 3 3 3 3 c . 
                    . . . . c 6 6 6 6 3 3 3 3 3 3 c 
                    . c c c c c 6 6 c c 3 3 3 3 3 c 
                    b 5 5 c 3 3 c c 5 5 c 3 3 3 c c 
                    f f 5 c c c 3 c 5 f f 6 6 6 c c 
                    f f 5 c c c c c 5 f f 3 3 3 3 c 
                    . b 5 5 3 c 3 5 5 c 3 3 3 3 3 c 
                    . c 4 4 5 5 5 5 4 c c 3 3 3 c . 
                    c 4 5 5 4 4 4 4 5 5 4 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . c c . . . 
                    . . c c . c c c c 3 c 6 3 c . . 
                    . f f 5 c 6 c 5 f f 3 3 6 c . . 
                    . f f 5 c 6 c 5 f f 3 3 3 3 c . 
                    . b 5 5 5 c 5 5 5 c 3 3 3 3 3 c 
                    . b 5 5 5 c 5 5 5 c 6 3 3 3 3 c 
                    . b b 5 5 3 5 5 c 3 6 3 3 3 c c 
                    . b b 5 5 3 5 5 c 3 3 3 6 6 c c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 3 c 
                    b 5 4 b 4 4 4 4 b b 5 c 3 3 c . 
                    c 4 5 5 b 4 b 5 5 5 4 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . c 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . f f 5 3 c 3 5 f f 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 4 5 5 b 4 b 5 5 5 4 c 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `],
                100,
                false
                )
            }
            pause(100)
            shelled = false
            Herm.setFlag(SpriteFlag.GhostThroughTiles, false)
        }
    }
})
scene.onHitWall(SpriteKind.Player, function (sprite, location) {
    if (Herm.tileKindAt(TileDirection.Bottom, assets.tile`myTile0`)) {
        Herm.x += -1
    }
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.doorOpenSouth, function (sprite, location) {
    sprite.sayText("^", 100, true)
    if (sprite.isHittingTile(CollisionDirection.Bottom) && controller.up.isPressed()) {
        game.showLongText("Far from the slow-moving scavenger they might seem,", DialogLayout.Top)
        game.showLongText("hermit crabs are dynamic explorers,", DialogLayout.Top)
        game.showLongText("always adapting to the ever-changing world around them.", DialogLayout.Top)
        game.showLongText("This one seems to have found a door.", DialogLayout.Top)
        game.showLongText("Where could this door lead?", DialogLayout.Top)
        game.showLongText("Find out in the next chapter of...", DialogLayout.Top)
        scroller.setLayerImage(scroller.BackgroundLayer.Layer0, img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
        tiles.setCurrentTilemap(tilemap`level11`)
        scene.setBackgroundColor(15)
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ....55555.......................................................................................................................................................
            ....55555..............55555.........55555555555555555555555555555..............................................................................................
            ....55555..............55555.........55555555555555555555555555555..............................................................................................
            ....55555..............55555.........55555555555555555555555555555..........5555555555555555....................................................................
            ....55555..............55555........555555555555555555555555555555..........55555555555555555555................................................................
            ....55555..............55555........555555555555555555555555555555..........5555555555555555555555................55555.........................................
            ....55555..............55555........55555...................................5555555555555555555555555.............5555555.........................55555.........
            ....55555..............55555........55555...................................55555555555555555555555555............55555555.......................555555.........
            ....55555..............55555........55555...................................55555.......55555555555555............555555555.....................5555555.........
            ....55555..............55555........55555...................................55555...........55555555555...........5555555555...................55555555.........
            ....55555..............55555........55555...................................55555.............555555555...........5555555555..................555555555.........
            ....55555..............55555........55555...................................55555................5555555..........55555555555................5555555555.........
            ....55555..............55555........55555...................................55555................5555555..........555555555555.............555555555555.........
            ....55555..............55555........55555...................................55555.................555555..........5555555555555...........5555555555555.........
            ....55555..............55555........55555...................................55555.................555555..........55555555555555.........55555555555555.........
            ....55555..............55555........55555...................................55555..................55555..........55555.555555555.......555555555555555.........
            ....55555..............55555........55555...................................55555.................555555..........55555..555555555.....5555555555.55555.........
            ....55555..............55555........55555...................................55555.................555555..........55555...555555555...555555555...55555.........
            ....55555..............55555........55555...................................55555.................555555..........55555....55555555..555555555....55555.........
            ....55555..............55555........55555...................................55555................5555555..........55555.....55555555555555555.....55555.........
            ....55555..............55555........555555555555555555555555555555..........55555...............5555555...........55555......555555555555555......55555.........
            ....555555555555555555555555........555555555555555555555555555555..........55555..............55555555...........55555.......5555555555555.......55555.........
            ....555555555555555555555555........555555555555555555555555555555..........55555555555555.555555555555...........55555.......555555555555........55555.........
            ....555555555555555555555555........555555555555555555555555555555..........55555555555555555555555555............55555........5555555555.........55555.........
            ....555555555555555555555555........555555555555555555555555555555..........55555555555555555555555555............55555.........5555555...........55555.........
            ....555555555555555555555555........55555...................................555555555555555555555555..............55555..........555555...........55555.........
            ....55555..............55555........55555...................................55555555555555555555555...............55555...........55555...........55555.........
            ....55555..............55555........55555...................................5555555555555555555...................55555...........................55555.........
            ....55555..............55555........55555...................................555555555555..........................55555...........................55555.........
            ....55555..............55555........55555...................................5555555555555.........................55555...........................55555.........
            ....55555..............55555........55555...................................55555555555555........................55555...........................55555.........
            ....55555..............55555........55555...................................555555555555555.......................55555...........................55555.........
            ....55555..............55555........55555...................................55555.5555555555......................55555...........................55555.........
            ....55555..............55555........55555...................................55555...555555555.....................55555...........................55555.........
            ....55555..............55555........55555...................................55555....555555555....................55555...........................55555.........
            ....55555..............55555........55555...................................55555.....555555555...................55555...........................55555.........
            ....55555..............55555........55555...................................55555......555555555..................55555...........................55555.........
            ....55555..............55555........55555...................................55555.......5555555555................55555...........................55555.........
            ....55555..............55555........55555...................................55555........5555555555...............55555...........................55555.........
            ....55555..............55555........55555...................................55555.........5555555555..............55555...........................55555.........
            ....55555.............555555........55555...................................55555..........5555555555.............55555..........................555555.........
            ....55555.............555555........555555555555555555555555555555..........55555...........5555555555............55555..........................555555.........
            ....55555.............555555........555555555555555555555555555555..........55555.............55555555............55555..........................555555.........
            ....55555.............555555........555555555555555555555555555555..........55555..............5555555............55555..........................555555.........
            ......................55555............555555555555555555555555555..........55555...............555555............55555..........................55555..........
            .......................................555555555555555555555555555..........55555................55555..........................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ...................................................................................................................5555555......................................
            ..................................................................................................................5555555555....................................
            .......................................555...555..................................................................55555555555.......................555.........
            ......555...555........................555...555.....................................................555.........55555.555555.......................5555........
            ......555...555........................555...5555.............................................555....555.........5555....5555.......................5555........
            ......555...555........................555...5555.............................................555....555.........555......555........................555........
            ...55555555.555........................555...5555...5555555...................................555....555........5555......555........................555........
            ...55555555.55555555...555555..........555....555..555555555...555...................................555........5555.................................555.5555...
            ...55555555.5555555555.555555..........5555555555..555555555...555...55555...........................555........555................55555..555555.....555555555..
            ......555...5555555555.55555555........5555555555..555555555...555...55555..555.....555555....555..5555555......555..............5555555.555555555...555555555..
            ......555...5555555555.55555555........5555555555..555555555...555..555555..555.55555555555...555..55555555.....555...........5555555555.555555555...5555555555.
            .....5555..55555...555.55555555........555....555..555555555...555555555....555555555555555...555..55555555.....555...........55555555..55555.55555..5555555555.
            .....5555..5555....555.5555............5555...555..555..5555...55555555.....5555555555555555..555..55555555.....5555..........555555....5555....555..55555..555.
            .....555...555.....555.55555...........5555...555..555.........5555555......55555555555.5555..5555...5555.......5555..........55555.....5555...5555..55555.5555.
            ...................555..55555555.......5555...555..5555........55555........55555.5555..5555..5555....555........55555........5555......555....5555..55555.5555.
            ...................555..55555555........555...555..555555555...5555.........5555..555...5555...555....555........555555555555.5555......5555..55555..55555.555..
            .........................5555555....................55555555...5555.........555.........555....555....555........555555555555.5555......55555555555..555555555..
            ....................................................55555555...555..........555.........555....555....555..........5555555555............5555555555..555555555..
            ...............................................................555......................555....555....555.................................555555555...5555555...
            ......................................................................................................555..................................5555.555...555555....
            ................................................................................................................................................555...555.......
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
        game.showLongText("Chapter 1 coming soon!", DialogLayout.Bottom)
        game.setGameOverMessage(true, "Chapter 1 coming soon!")
        game.setGameOverEffect(true, effects.confetti)
        game.gameOver(true)
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Main_Menu) {
        if (Chapter_List[menuNumber] == "???????") {
            Chapter_Show.sayText("Coming Soon!", 500, true)
        } else {
            loadLevel()
        }
    } else {
        if (Herm.isHittingTile(CollisionDirection.Bottom)) {
            Herm.vy += -150
        }
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Coin, function (sprite, otherSprite) {
    sprites.destroy(otherSprite, effects.rings, 100)
    info.changeScoreBy(1)
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(Main_Menu)) {
        if (Herm.vx == 0 && !(shelled)) {
            if (direction == "right") {
                animation.runImageAnimation(
                Herm,
                [img`
                    ...cc...................
                    ..c36cccc...............
                    ..c633336c..............
                    .c33333cc6c.cc..........
                    c33333c55c6c55b.........
                    c33333ff5c6c5ff.........
                    cc3336ff5c6c5ff.........
                    cc6666c553c355b.........
                    c333333c55355b..........
                    c3333ccb55555cc.........
                    .c33c55b4555455c........
                    ..bbc5bb4444b45b........
                    .b54c4555b4b554c........
                    .c5c4c555c4c555c........
                    .c5c4c5555c5555c........
                    .ccc..ccccccccc.........
                    `,img`
                    ........................
                    ...cc...................
                    ..c36cccc...............
                    ..c633336c..............
                    .c33333366c.............
                    c33333cc66cccb..........
                    c3333c55c6c55b..........
                    cc333ff5c6c5ff..........
                    cc666ff5ccc5ff..........
                    c33333c55355b...........
                    c333ccb55555cc..........
                    .c3c5cccccccc5c.........
                    ..bc55555c5555c.........
                    .b5c4555c4c555c.........
                    .c54c555c4c554c.........
                    .ccccccc444ccc..........
                    `,img`
                    ...cc...................
                    ..c36cccc...............
                    ..c633336c..............
                    .c333ccccccc............
                    c333c555c555c...........
                    c33c555c4c555c..........
                    c33c555c4c555c..........
                    cc3c555ccc55cc..........
                    cc6c55c55c5c55c.........
                    c33c4cff5ccc5ff.........
                    c33c5cff5ccc5ff.........
                    .ccc54c553c355c.........
                    .c54c44c55555c..........
                    .c5cccc45555cc..........
                    .c5cccc4555cc...........
                    .ccc..cccccc............
                    `,img`
                    ..cc....................
                    .c36cccccccc............
                    cc63c555c555c...........
                    c33c555c4c555c..........
                    c33c555c4c555c..........
                    c33c555c4c555c..........
                    cc3c555ccc55cc..........
                    cc6c55ff5ccc5ff.........
                    c33c4cff5ccc5ff.........
                    c33c5cc55ccc55c.........
                    c33c5cc55ccc55c.........
                    .ccc54c553c355c.........
                    .c54c44c55555c..........
                    .c5cccc45555cc..........
                    .c5cccc4555cc...........
                    .ccc..cccccc............
                    `,img`
                    ........................
                    ........................
                    ........................
                    .....cc.................
                    ....c36cccc.............
                    ...cc633336cc...........
                    ..c3333336666c..........
                    ..c3333366666c..........
                    ..cc333666cccc.cc.......
                    ..cc66666c55ccc55c......
                    ..c333366ff5ccc5ff......
                    ..c333336ff5ccc5ff......
                    ..c333333c5555bbbbbbbb..
                    ...c54c3ccccc455555c55c.
                    ...c5cccc45554555555c55c
                    ...ccc.ccccccccccccccccc
                    `,img`
                    ...cc...................
                    ..c36cccc...............
                    ..c633336c..............
                    .c33333366c.............
                    c3333336666c............
                    c333336cc66cccb.........
                    cc3336c55c6c55b.........
                    cc6666ff5c6c5ff.........
                    c33333ff5cc35ff.........
                    c33333c555355b..........
                    .c33333c45554c..........
                    ..bbccccb44bbbbbb.......
                    .b54ccc55cbb555b5c......
                    .c5ccccc5545555c5c......
                    .c5c...cc5455555c5c.....
                    .ccc....ccccccccccc.....
                    `],
                100,
                false
                )
                music.play(music.melodyPlayable(music.baDing), music.PlaybackMode.UntilDone)
                Herm.setImage(img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                    c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . b 5 4 c 4 5 5 5 b 4 b 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `)
            } else if (direction == "left") {
                Herm.x = Herm.x - 5
                animation.runImageAnimation(
                Herm,
                [img`
                    ...................cc...
                    ...............cccc63c..
                    ..............c633336c..
                    ..........cc.c6cc33333c.
                    .........b55c6c55c33333c
                    .........ff5c6c5ff33333c
                    .........ff5c6c5ff6333cc
                    .........b553c355c6666cc
                    ..........b55355c333333c
                    .........cc55555bcc3333c
                    ........c5545554b55c33c.
                    ........b54b4444bb5cbb..
                    ........c455b4b5554c45b.
                    ........c555c4c555c4c5c.
                    ........c5555c5555c4c5c.
                    .........ccccccccc..ccc.
                    `,img`
                    ........................
                    ...................cc...
                    ...............cccc63c..
                    ..............c633336c..
                    .............c66333333c.
                    ..........bccc66cc33333c
                    ..........b55c6c55c3333c
                    ..........ff5c6c5ff333cc
                    ..........ff5ccc5ff666cc
                    ...........b55355c33333c
                    ..........cc55555bcc333c
                    .........c5cccccccc5c3c.
                    .........c5555c55555cb..
                    .........c555c4c5554c5b.
                    .........c455c4c555c45c.
                    ..........ccc444ccccccc.
                    `,img`
                    ...................cc...
                    ...............cccc63c..
                    ..............c633336c..
                    ............ccccccc333c.
                    ...........c555c555c333c
                    ..........c555c4c555c33c
                    ..........c555c4c555c33c
                    ..........cc55ccc555c3cc
                    .........c55c5c55c55c6cc
                    .........ff5ccc5ffc4c33c
                    .........ff5ccc5ffc5c33c
                    .........c553c355c45ccc.
                    ..........c55555c44c45c.
                    ..........cc55554cccc5c.
                    ...........cc5554cccc5c.
                    ............cccccc..ccc.
                    `,img`
                    ....................cc..
                    ............cccccccc63c.
                    ...........c555c555c36cc
                    ..........c555c4c555c33c
                    ..........c555c4c555c33c
                    ..........c555c4c555c33c
                    ..........cc55ccc555c3cc
                    .........ff5ccc5ff55c6cc
                    .........ff5ccc5ffc4c33c
                    .........c55ccc55cc5c33c
                    .........c55ccc55cc5c33c
                    .........c553c355c45ccc.
                    ..........c55555c44c45c.
                    ..........cc55554cccc5c.
                    ...........cc5554cccc5c.
                    ............cccccc..ccc.
                    `,img`
                    ........................
                    ........................
                    ........................
                    .................cc.....
                    .............cccc63c....
                    ...........cc633336cc...
                    ..........c6666333333c..
                    ..........c6666633333c..
                    .......cc.cccc666333cc..
                    ......c55ccc55c66666cc..
                    ......ff5ccc5ff663333c..
                    ......ff5ccc5ff633333c..
                    ..bbbbbbbb5555c333333c..
                    .c55c555554ccccc3c45c...
                    c55c55555545554cccc5c...
                    ccccccccccccccccc.ccc...
                    `,img`
                    ...................cc...
                    ...............cccc63c..
                    ..............c633336c..
                    .............c66333333c.
                    ............c6666333333c
                    .........bccc66cc633333c
                    .........b55c6c55c6333cc
                    .........ff5c6c5ff6666cc
                    .........ff53cc5ff33333c
                    ..........b553555c33333c
                    ..........c45554c33333c.
                    .......bbbbbb44bccccbb..
                    ......c5b555bbc55ccc45b.
                    ......c5c5555455ccccc5c.
                    .....c5c5555545cc...c5c.
                    .....ccccccccccc....ccc.
                    `],
                100,
                false
                )
                music.play(music.melodyPlayable(music.baDing), music.PlaybackMode.UntilDone)
                Herm.setImage(img`
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 4 5 5 b 4 b 5 5 5 4 c 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `)
                Herm.x = Herm.x + 5
            }
        }
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile15`, function (sprite, location) {
    sprites.destroy(Herm, effects.disintegrate, 100)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile13`, function (sprite, location) {
    sprites.destroy(Herm, effects.disintegrate, 100)
})
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    pause(50)
    if (!(Main_Menu)) {
        if (shelled == false && Herm.vx == 0) {
            animation.stopAnimation(animation.AnimationTypes.All, Herm)
        }
    }
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Main_Menu) {
        if (!(menuNumber <= 0)) {
            menuNumber += -1
            menuChoice(menuNumber)
        }
    } else {
        direction = "left"
        if (shelled == false) {
            animation.stopAnimation(animation.AnimationTypes.All, Herm)
            animation.runImageAnimation(
            Herm,
            [img`
                . . . . . . . . . . . c c . . . 
                . . . . . . . c c c c 6 3 c . . 
                . . . . . . c 6 3 3 3 3 6 c . . 
                . . c c . c 6 c c 3 3 3 3 3 c . 
                . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                . . c 5 5 5 5 b c c 3 3 3 3 3 c 
                . . c 4 5 5 4 b 5 5 c 3 3 3 c . 
                . c 5 b 4 4 b b 5 c c b b b . . 
                . c 4 4 b 5 5 5 4 c 4 4 4 5 b . 
                . c 5 4 c 5 5 5 c 4 4 4 c 5 c . 
                . c 5 c 5 5 5 5 c 4 4 4 c c c . 
                . . c c c c c c c . . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . c c . . . . 
                . . . . . . c c c c 6 3 c . . . 
                . . . . . c 6 6 3 3 3 6 c . . . 
                . . . . c 6 6 3 3 3 3 3 3 c . . 
                b c c c 6 6 c c 3 3 3 3 3 3 c . 
                b 5 5 c 6 c 5 5 c 3 3 3 3 3 c . 
                f f 5 c 6 c 5 f f 6 3 3 3 c c . 
                f f 5 c c c 5 f f 6 6 6 6 c c . 
                . b 5 5 3 5 5 c 3 3 3 3 3 3 c . 
                . c 5 5 5 5 4 c c c 3 3 3 3 c . 
                . c 4 5 5 4 4 b 5 5 c 3 3 c . . 
                . c 5 b 4 4 b b 5 c b b c . . . 
                . c c 5 4 c 5 5 5 c c 5 c . . . 
                . . . c c 5 5 5 5 c c c c . . . 
                . . . . c c c c c c . . . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . c c . . . 
                . . . . . . . c c c c 6 3 c . . 
                . . . . . . c 6 6 3 3 3 6 c . . 
                . . . . . c 6 6 3 3 3 3 3 3 c . 
                . b c c c 6 6 c c 3 3 3 3 3 3 c 
                . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                . f f 5 c c c 5 f f 6 6 6 6 c c 
                . . b 5 5 3 5 5 c c c 3 3 3 3 c 
                . . c 5 5 5 5 5 b 5 5 c 3 3 3 c 
                . c 4 4 5 5 4 4 b b 5 c 3 3 c . 
                . c 5 5 b 4 4 4 b 5 5 5 b c . . 
                . c 5 5 5 4 4 4 c 5 5 5 c b . . 
                . . c c c c 4 c 5 5 5 5 c c . . 
                . . . . c c c c c c c c c c . . 
                `,img`
                . . . . . . . . . . . c c . . . 
                . . . . . . . c c c c 6 3 c . . 
                . . . . . . c 6 3 3 3 3 6 c . . 
                . . c c . c 6 c c 3 3 3 3 3 c . 
                . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                . c c 5 5 5 5 4 c c 3 3 3 3 3 c 
                c 5 5 4 5 5 4 c 5 5 c 3 3 3 c . 
                b 5 4 b 4 4 4 c 5 5 5 b c c . . 
                c 4 5 5 b 4 4 c 5 5 5 c b b . . 
                c 5 5 5 c 4 c 5 5 5 5 c c 5 b . 
                c 5 5 5 5 c 4 c c c c c c 5 c . 
                . c c c c c c . . . . . c c c . 
                `],
            50,
            true
            )
        } else if (shelled == true && direction == "left") {
            Herm.image.flipX()
        }
    }
})
function loadLevel () {
    if (Main_Menu) {
        Main_Menu = false
        sprites.destroyAllSpritesOfKind(SpriteKind.Text)
        scene.setBackgroundImage(img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
        Herm = sprites.create(img`
            . . . c c . . . . . . . . . . . 
            . . c 3 6 c c c c . . . . . . . 
            . . c 6 3 3 3 3 6 c . . . . . . 
            . c 3 3 3 3 3 c c 6 c . c c . . 
            c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
            c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
            c c 3 3 3 6 f f 5 c 6 c 5 f f . 
            c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
            c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
            c 3 3 3 3 3 c c 4 5 5 5 5 c c . 
            . c 3 3 3 c 5 5 c 4 5 5 4 5 5 c 
            . . c c b 5 5 5 c 4 4 4 b 4 5 b 
            . . b b c 5 5 5 c 4 4 b 5 5 4 c 
            . b 5 c c 5 5 5 5 c 4 c 5 5 5 c 
            . c 5 c c c c c c 4 c 5 5 5 5 c 
            . c c c . . . . . c c c c c c . 
            `, SpriteKind.Player)
        if (menuNumber == 0) {
            controller.moveSprite(Herm, 0, 0)
            Herm.setImage(img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . c c . . . . . . . . . . . . 
                . c 3 6 c c c c c . . . . . . . 
                . c 6 6 3 3 3 6 6 c . . . . . . 
                c 3 3 3 3 3 3 6 6 6 c . . . . . 
                c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                c 3 3 3 3 3 6 6 6 6 6 c c c . . 
                c 3 3 3 3 6 6 6 6 6 c 3 3 3 c . 
                c c 3 3 6 6 6 6 6 c 3 c c c 3 c 
                c c 6 6 6 6 6 6 c 3 c c c c 6 c 
                c 3 3 3 3 6 6 c 6 6 c c c c 6 c 
                c 6 3 3 3 3 6 c 6 c c c c 6 c . 
                . c 6 3 3 3 6 c c c c c 6 c . . 
                . . c c c c c c c c c c c . . . 
                `)
            shelled = true
            mapSelect(0)
            music.play(music.melodyPlayable(music.baDing), music.PlaybackMode.UntilDone)
            game.showLongText("Behold, the hermit crab in its natural habitat.", DialogLayout.Top)
            game.showLongText("A resourceful wanderer of the shoreline,", DialogLayout.Top)
            game.showLongText("it scuttles across the sand, searching for the perfect home.", DialogLayout.Top)
        } else if (menuNumber == 1) {
            info.setScore(0)
            mapSelect(1)
        }
        for (let value of tiles.getTilesByType(assets.tile`myTile2`)) {
            key = sprites.create(img`
                . . . . . . 5 5 5 5 f . . . . . 
                . . . . . 5 5 5 5 5 5 f . . . . 
                . . . . 5 5 5 . . 5 5 5 f . . . 
                . . . 5 5 5 . . . . 5 5 5 f . . 
                . . . 5 5 . . . . . . 5 5 f . . 
                . . . 5 5 . . . . . . 5 5 f . . 
                . . . 5 5 5 . . . . 5 5 5 f . . 
                . . . . 5 5 5 . . 5 5 5 f . . . 
                . . . . . 5 5 5 5 5 5 f . . . . 
                . . . . . . 5 5 5 5 f . . . . . 
                . . . . . . . 5 5 f . . . . . . 
                . . . . . . . 5 5 f . . . . . . 
                . . . . . . . 5 5 f f . . . . . 
                . . . . . . . 5 5 5 5 f . . . . 
                . . . . . . . 5 5 f f . . . . . 
                . . . . . . . 5 5 5 5 f . . . . 
                `, SpriteKind.Key)
            tiles.placeOnTile(key, value)
            tiles.setTileAt(value, assets.tile`transparency16`)
        }
        for (let value of tiles.getTilesByType(assets.tile`myTile6`)) {
            coin = sprites.create(img`
                . . b b b b . . 
                . b 5 5 5 5 b . 
                b 5 d 3 3 d 5 b 
                b 5 3 5 5 1 5 b 
                c 5 3 5 5 1 d c 
                c d d 1 1 d d c 
                . f d d d d f . 
                . . f f f f . . 
                `, SpriteKind.Coin)
            tiles.placeOnTile(coin, value)
            animation.runImageAnimation(
            coin,
            [img`
                . . b b b b . . 
                . b 5 5 5 5 b . 
                b 5 d 3 3 d 5 b 
                b 5 3 5 5 1 5 b 
                c 5 3 5 5 1 d c 
                c d d 1 1 d d c 
                . f d d d d f . 
                . . f f f f . . 
                `,img`
                . . b b b . . . 
                . b 5 5 5 b . . 
                b 5 d 3 d 5 b . 
                b 5 3 5 1 5 b . 
                c 5 3 5 1 d c . 
                c 5 d 1 d d c . 
                . f d d d f . . 
                . . f f f . . . 
                `,img`
                . . . b b . . . 
                . . b 5 5 b . . 
                . b 5 d 1 5 b . 
                . b 5 3 1 5 b . 
                . c 5 3 1 d c . 
                . c 5 1 d d c . 
                . . f d d f . . 
                . . . f f . . . 
                `,img`
                . . . b b . . . 
                . . b 5 5 b . . 
                . . b 1 1 b . . 
                . . b 5 5 b . . 
                . . b d d b . . 
                . . c d d c . . 
                . . c 3 3 c . . 
                . . . f f . . . 
                `,img`
                . . . b b . . . 
                . . b 5 5 b . . 
                . b 5 1 d 5 b . 
                . b 5 1 3 5 b . 
                . c d 1 3 5 c . 
                . c d d 1 5 c . 
                . . f d d f . . 
                . . . f f . . . 
                `,img`
                . . . b b b . . 
                . . b 5 5 5 b . 
                . b 5 d 3 d 5 b 
                . b 5 1 5 3 5 b 
                . c d 1 5 3 5 c 
                . c d d 1 d 5 c 
                . . f d d d f . 
                . . . f f f . . 
                `],
            100,
            true
            )
            tiles.setTileAt(value, assets.tile`transparency16`)
        }
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Key, function (sprite, otherSprite) {
    otherSprite.startEffect(effects.smiles, 100)
    otherSprite.setFlag(SpriteFlag.Ghost, true)
    otherSprite.follow(sprite, 97)
    hasKey = true
    for (let value of tiles.getTilesByType(assets.tile`myTile8`)) {
        tiles.setWallAt(value, false)
    }
})
sprites.onDestroyed(SpriteKind.Player, function (sprite) {
    Herm = sprites.create(img`
        . . . c c . . . . . . . . . . . 
        . . c 3 6 c c c c . . . . . . . 
        . . c 6 3 3 3 3 6 c . . . . . . 
        . c 3 3 3 3 3 c c 6 c . c c . . 
        c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
        c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
        c c 3 3 3 6 f f 5 c 6 c 5 f f . 
        c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
        c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
        c 3 3 3 3 3 c c 4 5 5 5 5 c c . 
        . c 3 3 3 c 5 5 c 4 5 5 4 5 5 c 
        . . c c b 5 5 5 c 4 4 4 b 4 5 b 
        . . b b c 5 5 5 c 4 4 b 5 5 4 c 
        . b 5 c c 5 5 5 5 c 4 c 5 5 5 c 
        . c 5 c c c c c c 4 c 5 5 5 5 c 
        . c c c . . . . . c c c c c c . 
        `, SpriteKind.Player)
    tiles.placeOnTile(Herm, checkpoint)
    if (sprites.allOfKind(SpriteKind.Key).length > 0) {
        for (let value of sprites.allOfKind(SpriteKind.Key)) {
            value.setFlag(SpriteFlag.Ghost, false)
            hasKey = false
        }
        for (let value of tiles.getTilesByType(assets.tile`myTile8`)) {
            tiles.setWallAt(value, true)
        }
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile8`, function (sprite, location) {
    for (let value of sprites.allOfKind(SpriteKind.Key)) {
        if (value.vx != 0) {
            sprites.destroy(value, effects.halo, 100)
        }
    }
    tiles.setTileAt(location, assets.tile`transparency16`)
    if (Herm.isHittingTile(CollisionDirection.Bottom)) {
        tiles.setTileAt(location.getNeighboringLocation(CollisionDirection.Top), assets.tile`transparency16`)
    } else {
        tiles.setTileAt(location.getNeighboringLocation(CollisionDirection.Bottom), assets.tile`transparency16`)
    }
    for (let value of tiles.getTilesByType(assets.tile`myTile8`)) {
        tiles.setWallAt(value, true)
    }
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(Main_Menu)) {
        if (Herm.isHittingTile(CollisionDirection.Bottom) && shelled == false) {
            Herm.setFlag(SpriteFlag.GhostThroughTiles, true)
            shelled = true
            controller.moveSprite(Herm, 0, 0)
            if (direction == "right") {
                animation.runImageAnimation(
                Herm,
                [img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                    c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . b 5 4 c 4 5 5 5 b 4 b 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 c c 6 c . c c . . 
                    c 3 3 3 3 3 c 5 5 c 6 c 5 5 c . 
                    c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                    c c 6 6 6 6 f f 5 3 c 3 5 f f . 
                    c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    . c 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . . b b c 5 b b 4 4 4 4 b 4 5 b 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c 3 c c c c . c c . . 
                    . . c 6 3 3 f f 5 c 6 c 5 f f . 
                    . c 3 3 3 3 f f 5 c 6 c 5 f f . 
                    c 3 3 3 3 3 c 5 5 5 c 5 5 5 b . 
                    c 3 3 3 3 6 c 5 5 5 c 5 5 5 b . 
                    c c 3 3 3 6 3 c 5 5 3 5 5 b b . 
                    c c 6 6 3 3 3 c 5 5 3 5 5 b b . 
                    c 3 3 3 3 c c b 5 5 5 5 5 c c . 
                    c 3 3 3 c 5 5 b 4 5 5 5 4 5 5 c 
                    . c 3 3 c 5 b b 4 4 4 4 b 4 5 b 
                    . . b b c 4 5 5 5 b 4 b 5 5 4 c 
                    . b 5 4 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c . . . . . . . 
                    . . c 6 3 3 3 3 6 c . . . . . . 
                    . c 3 3 3 3 3 3 6 6 c . . . . . 
                    c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 c c 6 6 c c c c c . 
                    c c 3 3 3 c 5 5 c c 3 3 c 5 5 b 
                    c c 6 6 6 f f 5 c 3 c c c 5 f f 
                    c 3 3 3 3 f f 5 c c c c c 5 f f 
                    c 3 3 3 3 3 c 5 5 3 c 3 5 5 b . 
                    . c 3 3 3 c c 4 5 5 5 5 4 4 c . 
                    . . b b c 4 5 5 4 4 4 4 5 5 4 c 
                    . c 5 c 4 c 5 5 5 c 4 c 5 5 5 c 
                    . c 5 c 4 c 5 5 5 5 c 5 5 5 5 c 
                    . c c c . . c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . c c . . . . . . . . . . . 
                    . . c 3 6 c c c c c . . . . . . 
                    . c c 6 3 3 3 3 6 6 c . . . . . 
                    c 6 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 6 6 6 6 6 c . . . . 
                    c 3 3 3 3 6 6 6 6 6 6 c c c . . 
                    c c 6 6 6 6 6 6 6 6 c 3 3 3 c . 
                    c 6 3 3 3 6 6 6 c c 3 c c c 6 c 
                    c 3 3 3 3 3 6 c c c c c c c c c 
                    . c c c 6 6 c 4 5 5 c c 4 5 5 c 
                    . . . c 6 6 6 c 5 5 5 c 5 5 4 c 
                    . . . . c c c c c c c c c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . c c . . . . . . . . . . . . 
                    . c 3 6 c c c c c . . . . . . . 
                    . c 6 6 3 3 3 6 6 c . . . . . . 
                    c 3 3 3 3 3 3 6 6 6 c . . . . . 
                    c 3 3 3 3 3 3 6 6 6 6 c . . . . 
                    c 3 3 3 3 3 6 6 6 6 6 c c c . . 
                    c 3 3 3 3 6 6 6 6 6 c 3 3 3 c . 
                    c c 3 3 6 6 6 6 6 c 3 c c c 3 c 
                    c c 6 6 6 6 6 6 c 3 c c c c 6 c 
                    c 3 3 3 3 6 6 c 6 6 c c c c 6 c 
                    c 6 3 3 3 3 6 c 6 c c c c 6 c . 
                    . c 6 3 3 3 6 c c c c c 6 c . . 
                    . . c c c c c c c c c c c . . . 
                    `],
                100,
                false
                )
            } else {
                animation.runImageAnimation(
                Herm,
                [img`
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . b 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . b 5 5 3 c 3 5 5 c 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 4 5 5 b 4 b 5 5 5 4 c 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . c c . c 6 c c 3 3 3 3 3 c . 
                    . c 5 5 c 6 c 5 5 c 3 3 3 3 3 c 
                    . f f 5 c 6 c 5 f f 6 3 3 3 c c 
                    . f f 5 3 c 3 5 f f 6 6 6 6 c c 
                    . . b 5 5 3 5 5 c 3 3 3 3 3 3 c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 c . 
                    b 5 4 b 4 4 4 4 b b 5 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . c c . . . 
                    . . c c . c c c c 3 c 6 3 c . . 
                    . f f 5 c 6 c 5 f f 3 3 6 c . . 
                    . f f 5 c 6 c 5 f f 3 3 3 3 c . 
                    . b 5 5 5 c 5 5 5 c 3 3 3 3 3 c 
                    . b 5 5 5 c 5 5 5 c 6 3 3 3 3 c 
                    . b b 5 5 3 5 5 c 3 6 3 3 3 c c 
                    . b b 5 5 3 5 5 c 3 3 3 6 6 c c 
                    . c c 5 5 5 5 5 b c c 3 3 3 3 c 
                    c 5 5 4 5 5 5 4 b 5 5 c 3 3 3 c 
                    b 5 4 b 4 4 4 4 b b 5 c 3 3 c . 
                    c 4 5 5 b 4 b 5 5 5 4 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 4 5 b . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . . c c c c 6 3 c . . 
                    . . . . . . c 6 3 3 3 3 6 c . . 
                    . . . . . c 6 6 3 3 3 3 3 3 c . 
                    . . . . c 6 6 6 6 3 3 3 3 3 3 c 
                    . c c c c c 6 6 c c 3 3 3 3 3 c 
                    b 5 5 c 3 3 c c 5 5 c 3 3 3 c c 
                    f f 5 c c c 3 c 5 f f 6 6 6 c c 
                    f f 5 c c c c c 5 f f 3 3 3 3 c 
                    . b 5 5 3 c 3 5 5 c 3 3 3 3 3 c 
                    . c 4 4 5 5 5 5 4 c c 3 3 3 c . 
                    c 4 5 5 4 4 4 4 5 5 4 c b b . . 
                    c 5 5 5 c 4 c 5 5 5 c 4 c 5 c . 
                    c 5 5 5 5 c 5 5 5 5 c 4 c 5 c . 
                    . c c c c c c c c c . . c c c . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . c c . . . 
                    . . . . . . c c c c c 6 3 c . . 
                    . . . . . c 6 6 3 3 3 3 6 c c . 
                    . . . . c 6 6 6 6 3 3 3 3 3 6 c 
                    . . . . c 6 6 6 6 6 3 3 3 3 3 c 
                    . . c c c 6 6 6 6 6 6 3 3 3 3 c 
                    . c 3 3 3 c 6 6 6 6 6 6 6 6 c c 
                    c 6 c c c 3 c c 6 6 6 3 3 3 6 c 
                    c c c c c c c c c 6 3 3 3 3 3 c 
                    c 5 5 4 c c 5 5 4 c 6 6 c c c . 
                    c 4 5 5 c 5 5 5 c 6 6 6 c . . . 
                    . c c c c c c c c c c c . . . . 
                    `,img`
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . . . . . 
                    . . . . . . . . . . . . c c . . 
                    . . . . . . . c c c c c 6 3 c . 
                    . . . . . . c 6 6 3 3 3 6 6 c . 
                    . . . . . c 6 6 6 3 3 3 3 3 3 c 
                    . . . . c 6 6 6 6 3 3 3 3 3 3 c 
                    . . c c c 6 6 6 6 6 3 3 3 3 3 c 
                    . c 3 3 3 c 6 6 6 6 6 3 3 3 3 c 
                    c 3 c c c 3 c 6 6 6 6 6 3 3 c c 
                    c 6 c c c c 3 c 6 6 6 6 6 6 c c 
                    c 6 c c c c 6 6 c 6 6 3 3 3 3 c 
                    . c 6 c c c c 6 c 6 3 3 3 3 6 c 
                    . . c 6 c c c c c 6 3 3 3 6 c . 
                    . . . c c c c c c c c c c c . . 
                    `],
                100,
                false
                )
            }
        }
    }
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    if (Main_Menu) {
        if (!(menuNumber >= Chapter_List.length - 1)) {
            menuNumber += 1
            menuChoice(menuNumber)
        }
    } else {
        direction = "right"
        if (shelled == false) {
            animation.stopAnimation(animation.AnimationTypes.All, Herm)
            animation.runImageAnimation(
            Herm,
            [img`
                . . . c c . . . . . . . . . . . 
                . . c 3 6 c c c c . . . . . . . 
                . . c 6 3 3 3 3 6 c . . . . . . 
                . c 3 3 3 3 3 c c 6 c . c c . . 
                c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                c 3 3 3 3 3 c c b 5 5 5 5 c . . 
                . c 3 3 3 c 5 5 b 4 5 5 4 c . . 
                . . b b b c c 5 b b 4 4 b 5 c . 
                . b 5 4 4 4 c 4 5 5 5 b 4 4 c . 
                . c 5 c 4 4 4 c 5 5 5 c 4 5 c . 
                . c c c 4 4 4 c 5 5 5 5 c 5 c . 
                . . . . . . . c c c c c c c . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . . c c . . . . . . . . . . 
                . . . c 3 6 c c c c . . . . . . 
                . . . c 6 3 3 3 6 6 c . . . . . 
                . . c 3 3 3 3 3 3 6 6 c . . . . 
                . c 3 3 3 3 3 3 c c 6 6 c c c b 
                . c 3 3 3 3 3 c 5 5 c 6 c 5 5 b 
                . c c 3 3 3 6 f f 5 c 6 c 5 f f 
                . c c 6 6 6 6 f f 5 c c c 5 f f 
                . c 3 3 3 3 3 3 c 5 5 3 5 5 b . 
                . c 3 3 3 3 c c c 4 5 5 5 5 c . 
                . . c 3 3 c 5 5 b 4 4 5 5 4 c . 
                . . . c b b c 5 b b 4 4 b 5 c . 
                . . . c 5 c c 5 5 5 c 4 5 c c . 
                . . . c c c c 5 5 5 5 c c . . . 
                . . . . . . c c c c c c . . . . 
                `,img`
                . . . . . . . . . . . . . . . . 
                . . . c c . . . . . . . . . . . 
                . . c 3 6 c c c c . . . . . . . 
                . . c 6 3 3 3 6 6 c . . . . . . 
                . c 3 3 3 3 3 3 6 6 c . . . . . 
                c 3 3 3 3 3 3 c c 6 6 c c c b . 
                c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                c c 6 6 6 6 f f 5 c c c 5 f f . 
                c 3 3 3 3 c c c 5 5 3 5 5 b . . 
                c 3 3 3 c 5 5 b 5 5 5 5 5 c . . 
                . c 3 3 c 5 b b 4 4 5 5 4 4 c . 
                . . c b 5 5 5 b 4 4 4 b 5 5 c . 
                . . b c 5 5 5 c 4 4 4 5 5 5 c . 
                . . c c 5 5 5 5 c 4 c c c c . . 
                . . c c c c c c c c c c . . . . 
                `,img`
                . . . c c . . . . . . . . . . . 
                . . c 3 6 c c c c . . . . . . . 
                . . c 6 3 3 3 3 6 c . . . . . . 
                . c 3 3 3 3 3 c c 6 c . c c . . 
                c 3 3 3 3 3 c 5 5 c 6 c 5 5 b . 
                c 3 3 3 3 3 f f 5 c 6 c 5 f f . 
                c c 3 3 3 6 f f 5 c 6 c 5 f f . 
                c c 6 6 6 6 c 5 5 3 c 3 5 5 b . 
                c 3 3 3 3 3 3 c 5 5 3 5 5 b . . 
                c 3 3 3 3 3 c c 4 5 5 5 5 c c . 
                . c 3 3 3 c 5 5 c 4 5 5 4 5 5 c 
                . . c c b 5 5 5 c 4 4 4 b 4 5 b 
                . . b b c 5 5 5 c 4 4 b 5 5 4 c 
                . b 5 c c 5 5 5 5 c 4 c 5 5 5 c 
                . c 5 c c c c c c 4 c 5 5 5 5 c 
                . c c c . . . . . c c c c c c . 
                `],
            50,
            true
            )
        } else if (shelled == true && direction == "right") {
            Herm.image.flipX()
        }
    }
})
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    pause(50)
    if (!(Main_Menu)) {
        if (shelled == false && Herm.vx == 0) {
            animation.stopAnimation(animation.AnimationTypes.All, Herm)
        }
    }
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile10`, function (sprite, location) {
    sprites.destroy(Herm, effects.ashes, 10)
})
function mapSelect (num: number) {
    if (num == 0) {
        scene.setBackgroundColor(9)
        scroller.setLayerImage(scroller.BackgroundLayer.Layer0, img`
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ......................11111111111...............................................................11111111111.....................................................
            ...................11111111111111111...........................................................1111111111111....................................................
            ..................1111111111111111111........................................................11111111111111111..................................................
            .................111111111111111111111...11111111111........................................1111111111111111111.................................................
            ...............111111111111111111111111111111111111111.....................................111111111111111111111................................................
            ...............11111111111111111111111111111111111111111...................................111111111111111111111...11111111111..................................
            ..............1111111111111111111111111111111111111111111.................................11111111111111111111111111111111111111................................
            .............111111111111111111111111111111111111111111111...............................11111111111111111111111111111111111111111..............................
            ............11111111111111111111111111111111111111111111111..............................111111111111111111111111111111111111111111.............................
            ............11111111111111111111111111111111111111111111111..............................1111111111111111111111111111111111111111111............................
            ............111111111111111111111111111111111111111111111111.....................1111111111111111111111111111111111111111111111111111...........................
            ...........1111111111111111111111111111111111111111111111111..................11111111111111111111111111111111111111111111111111111111..........................
            ...........11111111111111111111111111111111111111111111111111................111111111111111111111111111111111111111111111111111111111..........................
            ...........11111111111111111111111111111111111111111111111111..............111111111111111111111111111111111111111111111111111111111111.........................
            ...........11111111111111111111111111111111111111111111111111.............1111111111111111111111111111111111111111111111111111111111111.........................
            ...........11111111111111111111111111111111111111111111111111............111111111111111111111111111111111111111111111111111111111111111........................
            ...........11111111111111111111111111111111111111111111111111...........1111111111111111111111111111111111111111111111111111111111111111........................
            ...........11111111111111111111111111111111111111111111111111...........1111111111111111111111111111111111111111111111111111111111111111........................
            ...........11111111111111111111111111111111111111111111111111..........11111111111111111111111111111111111111111111111111111111111111111........................
            ...........11111111111111111111111111111111111111111111111111.........111111111111111111111111111111111111111111111111111111111111111111........................
            ...........11111111111111111111111111111111111111111111111111.........111111111111111111111111111111111111111111111111111111111111111111........................
            ...........11111111111111111111111111111111111111111111111111.........111111111111111111111111111111111111111111111111111111111111111111........................
            ............1111111111111111111111111111111111111111111111111........1111111111111111111111111111111111111111111111111111111111111111111........................
            ............111111111111111111111111111111111111111111111111.........1111111111111111111111111111111111111111111111111111111111111111111........................
            ............111111111111111111111111111111111111111111111111.........1111111111111111111111111111111111111111111111111111111111111111111........................
            .............1111111111111111111111111111111111111111111111..........1111111111111111111111111111111111111111111111111111111111111111111........................
            ..............111111111111111111111111111111111111111111111..........111111111111111111111111111111111111111111111111111111111111111111.........................
            ...............1111111111111111111111111111111111111111111...........111111111111111111111111111111111111111111111111111111111111111111.........................
            ...............111111111111111111111111111111111111111111............11111111111111111111111111111111111111111111111111111111111111111..........................
            .................111111111111111111111111111111111111111.............11111111111111111111111111111111111111111111111111111111111111111..........................
            ..................1111111111111111111..111111111111111...............1111111111111111111111111111111111111111111111111111111111111111...........................
            ...................11111111111111111.....11111111111.................111111111111111111111111111111111111111111111111111111111111111............................
            ......................11111111111....................................11111111111111111111111111111111111111111111111111111111111111.............................
            ......................................................................111111111111111111111111111111111111111111111111111111111111..............................
            ......................................................................1111111111111111111111111111111111111111111111111111111111................................
            ......................................................................11111111111111111111111111111111111111111111.11111111111..................................
            .......................................................................1111111111111111111111111111111111111111111..............................................
            ........................................................................111111111111111111111111111111111111111111..............................................
            ........................................................................111111111111111111111111111111111111111111..............................................
            .........................................................................11111111111111111111111111111111111111111..............................................
            ..........................................................................111111111111111111111111111111111111111...............................................
            ...........................................................................11111111111111111111111111111111111111...............................................
            .............................................................................11111111111111111111111111111111111................................................
            ..............................................................................111111111111111111111111111111111.................................................
            .................................................................................11111111111...111111111111111..................................................
            ................................................................................................1111111111111...................................................
            ..................................................................................................111111111.....................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            ................................................................................................................................................................
            `)
        scroller.scrollBackgroundWithSpeed(-1, 0, scroller.BackgroundLayer.Layer0)
        tiles.setCurrentTilemap(tilemap`level9`)
        scene.centerCameraAt(4.5 * 16, 6.3 * 16)
        checkpoint = tiles.getTileLocation(3, 6)
    } else if (num == 1) {
        tiles.setCurrentTilemap(tilemap`level2`)
        // column at half of the room, same row as Herm.
        scene.centerCameraAt(4.5 * 16, 27 * 16)
        checkpoint = tiles.getTileLocation(2, 27)
    } else if (num == 2) {
        tiles.setCurrentTilemap(tilemap`level6`)
        scene.centerCameraAt(4.5 * 16, 6.3 * 16)
        checkpoint = tiles.getTileLocation(2, 8)
    }
    tiles.placeOnTile(Herm, checkpoint)
}
sprites.onCreated(SpriteKind.Player, function (sprite) {
    controller.moveSprite(sprite, 100, 0)
    sprite.ay = 600
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile14`, function (sprite, location) {
    sprites.destroy(Herm, effects.disintegrate, 100)
})
scene.onOverlapTile(SpriteKind.Player, assets.tile`myTile11`, function (sprite, location) {
    sprites.destroy(Herm, effects.disintegrate, 100)
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.stairSouth, function (sprite, location) {
    if (!(shelled)) {
        if (controller.up.isPressed()) {
            Herm.vy = -50
        } else if (controller.down.isPressed()) {
            Herm.vy = 50
        }
    }
})
let checkpoint: tiles.Location = null
let coin: Sprite = null
let key: Sprite = null
let Herm: Sprite = null
let Chapter_Show: TextSprite = null
let Chapter_List: string[] = []
let menuNumber = 0
let direction = ""
let hasKey = false
let shelled = false
let Main_Menu = false
Main_Menu = true
shelled = false
hasKey = false
direction = "right"
menuNumber = 0
menuChoice(menuNumber)
game.setDialogFrame(img`
    ..ccccc....333.....333...ccccc...
    .c33b33c..39993...39993.c33b33c..
    c3b33bb3c39999933399999c3bb33b3c.
    c33b33b3c99111999991119c3b33b33c.
    cb33b33bc91999199919991cb33b33bc.
    c3b33bbbcb999991119999bcbbb33b3c.
    c3bb3bbd1b111119991111b1dbb3bb3c.
    .c33bbd1b11111111111111b1dbb33c..
    ..cccc1b1111111111111111b1cccc...
    .3991bb111111111111111111bb993...
    3991991111111111111111111191993..
    39919911111111111111111111991993.
    39919911111111111111111111991993.
    .3991911111111111111111111991993.
    ..39919111111111111111111191993..
    ..3991911111111111111111191993...
    ..3991911111111111111111191993...
    .39919111111111111111111191993...
    3991991111111111111111111191993..
    39919911111111111111111111991993.
    39919911111111111111111111991993.
    .3991911111111111111111111991993.
    ..699bb111111111111111111bb1993..
    ..cccc1b1111111111111111b1cccc...
    .c33bbd1b11111111111111b1dbb33c..
    c3bb3bbd1b111199911111b1dbb3bb3c.
    c3b33bbbcb999911199999bcbbb33b3c.
    cb33b33bc19991999199919cb33b33bc.
    c33b33b3c91119999911199c3b33b33c.
    c3b33bb3c99999333999993c3bb33b3c.
    .c33b33c.39993...39993..c33b33c..
    ..ccccc...333.....333....ccccc...
    .................................
    `)
game.onUpdate(function () {
    if (!(Main_Menu)) {
        if (Herm.x > scene.cameraProperty(CameraProperty.Right)) {
            scene.centerCameraAt(scene.cameraProperty(CameraProperty.X) + 160, scene.cameraProperty(CameraProperty.Y))
            checkpoint = Herm.tilemapLocation()
        } else if (Herm.x < scene.cameraProperty(CameraProperty.Left)) {
            scene.centerCameraAt(scene.cameraProperty(CameraProperty.X) - 160, scene.cameraProperty(CameraProperty.Y))
            checkpoint = Herm.tilemapLocation()
        } else if (Herm.y < scene.cameraProperty(CameraProperty.Top)) {
            scene.centerCameraAt(scene.cameraProperty(CameraProperty.X), scene.cameraProperty(CameraProperty.Y) - 112)
            checkpoint = Herm.tilemapLocation()
        } else if (Herm.y > scene.cameraProperty(CameraProperty.Bottom)) {
            scene.centerCameraAt(scene.cameraProperty(CameraProperty.X), scene.cameraProperty(CameraProperty.Y) + 112)
            checkpoint = Herm.tilemapLocation()
        }
    }
})
